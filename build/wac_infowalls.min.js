/*! wac_infowalls 14-05-2013 */
function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(t){mejs.YouTubeApi.flashReady(t)}function showTombstone(){clearTimeout(tombstoneTimeout),slideHasVideo===!0?$(".tombstone").addClass("on-video-slide"):$(".tombstone").removeClass("on-video-slide"),$(".tombstone").stop(!0,!0).delay(250).fadeIn(150),tombstoneTimeout=setTimeout(function(){$(".tombstone").stop(!0,!0).fadeOut(250)},5e3)}function hideIntro(){clearTimeout(introTimeout),$(".intro").stop(!0,!0).fadeOut(500),introTimeout=setTimeout(function(){$(".intro").show(),mySwipe.slide(1,0)},9e3)}function swapInfo(t,e){var i=$(e);$(".tombstone").html(i.children(".meta").html()),$("#info").html(i.children(".slide-article").html())}function slideInit(){window.mySwipe=new Swipe(document.getElementById("slider"),{callback:function(t,e){slideHasVideo=$(e).hasClass("video")?!0:!1,showTombstone(),swapInfo(t,e),Zoomer.zoomers[lastSlideId]&&Zoomer.zoomers[lastSlideId].map.centerImageAtExtents();for(var i=0;$(".video-container video").length>i;i++)$(".video-container video")[i].pause(),$(".video-container video")[i].setCurrentTime(0);var n="#"+lastSlideId;$(n).hasClass("video")&&($el=$(n),$el.find(".mejs-poster").css("display","block"),$el.find(".mejs-overlay-button").css("display","block"),$el.find(".mejs-overlay-play").css("display","block")),lastSlideId=e.id}}),swapInfo(1,".slide-index-0"),$(".video-container video").on("playing",function(){clearTimeout(introTimeout)}).on("pause",function(){hideIntro()}).on("ended",function(){hideIntro()})}(function(){var t,e=this,i=e.Backbone,n=[],o=n.push,s=n.slice,a=n.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var r=e._;r||"undefined"==typeof require||(r=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var n=this,o=r.once(function(){n.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,i)},off:function(t,e,i){var n,o,s,a,l,h,c,d;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:r.keys(this._events),l=0,h=a.length;h>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=n=[],e||i)for(c=0,d=s.length;d>c;c++)o=s[c],(e&&e!==o.callback&&e!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var o=!e&&!i;"object"==typeof e&&(i=this),t&&((n={})[t._listenerId]=t);for(var s in n)n[s].off(e,i,this),o&&delete this._listeners[s];return this}},h=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(h.test(i)){for(var s=i.split(h),a=0,r=s.length;r>a;a++)t[e].apply(t,[s[a]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,o=t.length,s=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;o>++n;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;o>++n;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;o>++n;)(i=t[n]).callback.call(i.ctx,s,a);return;case 3:for(;o>++n;)(i=t[n]).callback.call(i.ctx,s,a,r);return;default:for(;o>++n;)(i=t[n]).callback.apply(i.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};r.each(d,function(t,e){l[e]=function(e,i,n){var o=this._listeners||(this._listeners={}),s=e._listenerId||(e._listenerId=r.uniqueId("l"));return o[s]=e,"object"==typeof i&&(n=this),e[t](i,n,this),this}}),l.bind=l.on,l.unbind=l.off,r.extend(t,l);var m=t.Model=function(t,e){var i,n=t||{};e||(e={}),this.cid=r.uniqueId("c"),this.attributes={},r.extend(this,r.pick(e,p)),e.parse&&(n=this.parse(n,e)||{}),(i=r.result(this,"defaults"))&&(n=r.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];r.extend(m.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return r.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,o,s,a,l,h,u,c;if(null==t)return this;if("object"==typeof t?(o=t,i=e):(o={})[t]=e,i||(i={}),!this._validate(o,i))return!1;s=i.unset,l=i.silent,a=[],h=this._changing,this._changing=!0,h||(this._previousAttributes=r.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)e=o[n],r.isEqual(c[n],e)||a.push(n),r.isEqual(u[n],e)?delete this.changed[n]:this.changed[n]=e,s?delete c[n]:c[n]=e;if(!l){a.length&&(this._pending=!0);for(var d=0,m=a.length;m>d;d++)this.trigger("change:"+a[d],this,c[a[d]],i)}if(h)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,r.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,r.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!r.isEmpty(this.changed):r.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?r.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)r.isEqual(n[o],e=t[o])||((i||(i={}))[o]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(t){t=t?r.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),e.trigger("sync",e,n,t),void 0):!1},N(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,o,s,a=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,!(!n||i&&i.wait||this.set(n,i)))return!1;if(i=r.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=r.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var l=this,h=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=r.extend(n||{},e)),r.isObject(e)&&!l.set(e,i)?!1:(h&&h(l,t,i),l.trigger("sync",l,t,i),void 0)},N(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),s=this.sync(o,this,i),n&&i.wait&&(this.attributes=a),s},destroy:function(t){t=t?r.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(o){(t.wait||e.isNew())&&n(),i&&i(e,o,t),e.isNew()||e.trigger("sync",e,o,t)},this.isNew())return t.success(),!1;N(this,t);var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=r.result(this,"urlRoot")||r.result(this.collection,"url")||B();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},r.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=r.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,r.extend(e||{},{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];r.each(f,function(t){m.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),r[t].apply(r,e)}});var g=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,r.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},_={add:!0,merge:!1,remove:!1};r.extend(g.prototype,l,{model:m,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,r.defaults(e||{},_))},remove:function(t,e){t=r.isArray(t)?t.slice():[t],e||(e={});var i,n,o,s;for(i=0,n=t.length;n>i;i++)s=this.get(t[i]),s&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s));return this},set:function(t,e){e=r.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),r.isArray(t)||(t=t?[t]:[]);var i,n,s,l,h,u=e.at,c=this.comparator&&null==u&&e.sort!==!1,d=r.isString(this.comparator)?this.comparator:null,m=[],p=[],f={};for(i=0,n=t.length;n>i;i++)(s=this._prepareModel(t[i],e))&&((l=this.get(s))?(e.remove&&(f[l.cid]=!0),e.merge&&(l.set(s.attributes,e),c&&!h&&l.hasChanged(d)&&(h=!0))):e.add&&(m.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,null!=s.id&&(this._byId[s.id]=s)));if(e.remove){for(i=0,n=this.length;n>i;++i)f[(s=this.models[i]).cid]||p.push(s);p.length&&this.remove(p,e)}if(m.length&&(c&&(h=!0),this.length+=m.length,null!=u?a.apply(this.models,[u,0].concat(m)):o.apply(this.models,m)),h&&this.sort({silent:!0}),e.silent)return this;for(i=0,n=m.length;n>i;i++)(s=m[i]).trigger("add",s,this,e);return h&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,r.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,r.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,r.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return r.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),r.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(r.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=r.isFunction(e)?e:function(t){return t.get(e)};return r.sortedIndex(this.models,t,n,i)},pluck:function(t){return r.invoke(this.models,"get",t)},fetch:function(t){t=t?r.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},N(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?r.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(o){e.wait&&i.add(t,e),n&&n(t,o,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof m)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];r.each(y,function(t){g.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),r[t].apply(r,e)}});var w=["groupBy","countBy","sortBy"];r.each(w,function(t){g.prototype[t]=function(e,i){var n=r.isFunction(e)?e:function(t){return t.get(e)};return r[t](this.models,n,i)}});var b=t.View=function(t){this.cid=r.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];r.extend(b.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=r.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(r.isFunction(i)||(i=this[t[e]]),i){var n=e.match(x),o=n[1],s=n[2];i=r.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,i):this.$el.on(o,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=r.extend({},r.result(this,"options"),t)),r.extend(this,r.pick(t,T)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"),!1);else{var e=r.extend({},r.result(this,"attributes"));this.id&&(e.id=r.result(this,"id")),this.className&&(e["class"]=r.result(this,"className"));var i=t.$("<"+r.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,n){var o=P[e];r.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(n.url||(s.url=r.result(i,"url")||B()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",n.emulateJSON&&(s.data._method=o);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||n.emulateJSON||(s.processData=!1),"PATCH"!==s.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=t.ajax(r.extend(s,n));return i.trigger("request",i,l,n),l};var P={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var L=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,E=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(L.prototype,l,{initialize:function(){},route:function(e,i,n){r.isRegExp(e)||(e=this._routeToRegExp(e)),r.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var o=this;return t.history.route(e,function(s){var a=o._extractParameters(e,s);n&&n.apply(o,a),o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),t.history.trigger("route",o,i,a)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var t,e=r.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(M,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/]+)"}).replace(E,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return r.map(i,function(t){return t?decodeURIComponent(t):null})}});var k=t.History=function(){this.handlers=[],r.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,z=/msie [\w.]+/,A=/\/$/;k.started=!1,r.extend(k.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(A,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(j,"")},start:function(e){if(k.started)throw Error("Backbone.history has already been started");k.started=!0,this.options=r.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,o=z.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(D,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),k.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=r.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!k.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),t.history=new k;var I=function(t,e){var i,n=this;i=t&&r.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},r.extend(i,n,e);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,t&&r.extend(i.prototype,t),i.__super__=n.prototype,i};m.extend=g.extend=L.extend=b.extend=k.extend=I;var B=function(){throw Error('A "url" property or function must be specified')},N=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}).call(this);var Zoomer=Zoomer||{};Zoomer._realTileSize=512,Zoomer.zoomers=[],Zoomer.ua=navigator.userAgent.toLowerCase(),Zoomer.tilePad=1,Zoomer.roundingSlop=2,Zoomer.loadExtraTiles=2,Zoomer.Map=L.Map.extend({_debug:function(t){console.log(this._zoomer.containerName+" -------------"),console.log(t)},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new L.Point($("#"+this._container.id).actual("width"),$("#"+this._container.id).actual("height")),this._sizeChanged=!1),this._size.clone()},getMinZoom:function(){return this.options.minZoom||0},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=this.options.crs,o=-1>=t?0:Math.ceil(t);o>i&&(o=i),t=Math.max(e,Math.min(i,t)),this._zoomer&&this._zoomer.tiles&&(o=this._zoomer.noTiles&&e===i?0:o,this._zoomer.tileLayerScale=n.scale(t)/n.scale(o));var s=L.DomUtil.TRANSFORM?1:this._zoomer.tileLayerScale;return this._zoomer.tiles.options.tileSize=s*this._zoomer.currentMapTileSize,t},centerImageAtExtents:function(){this._zoomer.imageBounds=this._zoomer.noTiles?new L.LatLngBounds(this.unproject([0,this._zoomer.imageHeight*(this._zoomer.tileLayerScale>1?this._zoomer.tileLayerScale:1)],this.getMaxZoom()),this.unproject([this._zoomer.imageWidth*(this._zoomer.tileLayerScale>1?this._zoomer.tileLayerScale:1),0],this.getMaxZoom())):new L.LatLngBounds(this.unproject([Zoomer.roundingSlop,this._zoomer.imageHeight-Zoomer.roundingSlop],this.getMaxZoom()),this.unproject([this._zoomer.imageWidth-Zoomer.roundingSlop,Zoomer.roundingSlop],this.getMaxZoom())),this.fitBounds(this._zoomer.imageBounds),this._zoomer.noTiles||(this.options.minZoom=this.getBoundsZoom(this._zoomer.imageBounds))},panToContainImage:function(){if(this._tilePane.children[0]&&(this._tilePane.children[0].style[L.DomUtil.TRANSFORM]=L.DomUtil.getScaleString(this._zoomer.tileLayerScale,this.getPixelOrigin().multiplyBy(-1))),this.getZoom()===this.getMinZoom())return this.centerImageAtExtents(),void 0;var t=(this.getBounds(),0),e=0;this._zoomer.tiles&&(this._getEdgeDeltas(),this._edgeDeltas.dw>0&&this._edgeDeltas.de>0&&(t=Math.ceil(Math.min(this._edgeDeltas.de,this._edgeDeltas.dw))),0>this._edgeDeltas.dw&&0>this._edgeDeltas.de&&(t=Math.ceil(Math.max(this._edgeDeltas.de,this._edgeDeltas.dw))),this._edgeDeltas.ds>0&&this._edgeDeltas.dn>0&&(e=Math.ceil(Math.min(this._edgeDeltas.ds,this._edgeDeltas.dn))),0>this._edgeDeltas.ds&&0>this._edgeDeltas.dn&&(e=Math.ceil(Math.max(this._edgeDeltas.ds,this._edgeDeltas.dn))),this.panBy([t,e]))},_setNoTilesScale:function(){if(this._zoomer.noTiles){var t;this._zoomer.containerAspectRatio<this._zoomer.imageAspectRatio?(t=this._zoomer.container.actual("width"),1>this._zoomer.imageAspectRatio&&(t*=this._zoomer.imageHeight/this._zoomer.imageWidth)):(t=this._zoomer.container.actual("height"),this._zoomer.imageAspectRatio>1&&(t*=this._zoomer.imageWidth/this._zoomer.imageHeight)),this._zoomer.currentMapTileSize=Math.max(this._zoomer.imageWidth,this._zoomer.imageHeight),this._zoomer.tileLayerScale=t/this._zoomer.currentMapTileSize}else this._zoomer.currentMapTileSize=Zoomer._realTileSize},_getEdgeDeltas:function(){var t=this.getBounds(),e=this.project(t._northEast),i=this.project(this._zoomer.imageBounds._northEast),n=this.project(t._southWest),o=this.project(this._zoomer.imageBounds._southWest),s=o.x-n.x,a=i.x-e.x,r=o.y-n.y,l=i.y-e.y;this._edgeDeltas={dw:s,de:a,ds:r,dn:l}},isAtEastEdge:function(){return this._getEdgeDeltas(),this._edgeDeltas.de>0&&this._edgeDeltas.dw>0||0>this._edgeDeltas.de&&this._edgeDeltas.dw>0},isAtWestEdge:function(){return this._getEdgeDeltas(),0>this._edgeDeltas.dw&&0>this._edgeDeltas.de||0>this._edgeDeltas.de&&this._edgeDeltas.dw>0}}),Zoomer.zoomAtMouseLocation=function(t){var e=t.target,i=t.originalEvent.shiftKey?-1:1,n=e._limitZoom(e._zoom+i),o=e.getZoomScale(n),s=e.getSize()._divideBy(2),a=t.containerPoint._subtract(s)._multiplyBy(1-1/o),r=e._getTopLeftPoint()._add(s)._add(a);n!==e._zoom&&e.setView(e.unproject(r),n)},Zoomer.getParentMapForElement=function(t){var e,i;for(e in Zoomer.zoomers)if(Zoomer.zoomers.hasOwnProperty(e)&&(i=Zoomer.zoomers[e],i.container.has(t)))return i.map;return null},Zoomer.Map.TouchZoom=L.Map.TouchZoom.extend({_onTouchMove:function(t){if(t.touches&&2===t.touches.length){var e=this._map,i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);if(this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale){var o=e.getScaleZoom(this._scale);o>e.getMaxZoom()&&(this._scale=e.getZoomScale(e.getMaxZoom())),e.getMinZoom()>o&&(this._scale=e.getZoomScale(e.getMinZoom())),this._moved||(L.DomUtil.addClass(e._mapPane,"leaflet-zoom-anim leaflet-touching"),e.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),L.DomEvent.preventDefault(t)}}},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,L.DomUtil.removeClass(t._mapPane,"leaflet-touching"),L.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getZoom(),o=t.getScaleZoom(this._scale)-n,s=(o>0?Math.ceil(o):Math.floor(o),t._limitZoom(n+o));t.fire("zoomanim",{center:i,zoom:s});var a=1;t._runAnimation(i,s,a,e,!0)}}}),Zoomer._getNatural=function(t){if(t.naturalWidth)return{width:t.naturalWidth,height:t.naturalHeight};var e=new Image;return e.src=t.src,{width:e.width,height:e.height}},Zoomer.scaleNonSquareTile=function(t){var e=t.target._map,i=Zoomer._getNatural(t.tile),n=i.width,o=i.height,s=L.DomUtil.TRANSFORM?1:e._zoomer.tileLayerScale;t.tile.style.height=s*(o+Zoomer.tilePad)+"px",t.tile.style.width=s*(n+Zoomer.tilePad)+"px",e._zoomer.currentMapTileSize>o?t.tile.style.marginBottom=Math.ceil(e._zoomer.currentMapTileSize-o+Zoomer.tilePad)+"px":t.tile.style.marginTop="",t.tile.style.marginRight=e._zoomer.currentMapTileSize>n?Math.ceil((e._zoomer.currentMapTileSize-n)*(e._zoomer.tiles.options.tileSize/e._zoomer.currentMapTileSize)+Zoomer.tilePad)+"px":""},Zoomer.TileLayer=L.TileLayer.extend({_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),-1>=e?0:Math.ceil(e+t.zoomOffset)},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;if(!this.options.continuousWorld){this._getWrapTileNum();var e=Math.ceil(this._map.getZoom());e=0>e?0:e;var i=this._map._zoomer.noTiles?1:Math.ceil(this._map._zoomer.imageWidth/Math.pow(2,this._map.getMaxZoom()-e)/this._map._zoomer.tiles.options.tileSize),n=this._map._zoomer.noTiles?1:Math.ceil(this._map._zoomer.imageHeight/Math.pow(2,this._map.getMaxZoom()-e)/this._map._zoomer.tiles.options.tileSize);if(this.options.noWrap&&(0>t.x||t.x>=i)||0>t.y||t.y>=n)return!1}return!0},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(i*=Math.pow(2,e-Math.ceil(e)),this._map._zoomer.noTiles||!(e>this.options.maxZoom||this.options.minZoom>e)){var n=new L.Point(Math.floor(t.min.x/i)-Zoomer.loadExtraTiles,Math.floor(t.min.y/i)-Zoomer.loadExtraTiles),o=new L.Point(Math.floor(t.max.x/i)+Zoomer.loadExtraTiles,Math.floor(t.max.y/i)+Zoomer.loadExtraTiles),s=new L.Bounds(n,o);this._addTilesFromCenterOut(s),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(s)}}}}),Zoomer.computeZoomScale=function(t){var e=Math.max(t.imageWidth,t.imageHeight);for(t.maxZoom=t.noTiles?0:1;e>t.currentMapTileSize*Math.pow(2,t.maxZoom);)t.maxZoom+=1;t.maxZoom=t.noTiles?10:t.maxZoom,t.imageAspectRatio=t.imageWidth/t.imageHeight;var i=t.container.actual("width"),n=t.container.actual("height");t.containerAspectRatio=i/n,t.containerMin=Math.min(i,n),t.tileLayerScale=t.imageAspectRatio<t.containerAspectRatio?n/t.imageHeight:i/t.imageWidth},L.CRS.Simple=L.Util.extend({},L.CRS,{projection:L.Projection.LonLat,transformation:new L.Transformation(1,0,-1,0),scale:function(t){return Zoomer._realTileSize*Math.pow(2,t)}}),Zoomer.setupMap=function(t){t.map||(t.map=new Zoomer.Map(t.containerName,{crs:L.CRS.Simple,worldCopyJump:!1,maxZoom:t.maxZoom,inertia:L.Browser.touch,zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,trackResize:!0,touchZoom:!1,fadeAnimation:-1!==Zoomer.ua.indexOf("chrome")&&-1===Zoomer.ua.search("android 4.0.4")}),t.map.on("zoomend",t.map.panToContainImage),t.map.on("moveend",t.map.panToContainImage),t.map.on("click",Zoomer.zoomAtMouseLocation),t.map.options.touchZoom=!0,t.map.addHandler("touchZoom",Zoomer.Map.TouchZoom)),t.map._zoomer=t,t.map._setNoTilesScale(),t.map._zoom=0,t.map._loaded=!1,t.map.options.minZoom=t.map.getScaleZoom(t.tileLayerScale),t.map.options.maxZoom=t.noTiles?t.tileLayerScale>1?t.map.getScaleZoom(t.tileLayerScale):0:t.maxZoom},Zoomer.createTiles=function(t){var e=new Zoomer.TileLayer(t.tileURL,{noWrap:!0,subdomains:["","0","1","2"],continuousWorld:!1,maxZoom:t.map.options.maxZoom,minZoom:t.map.options.minZoom,tms:!1,detectRetina:!1,tileSize:t.currentMapTileSize,zoomOffset:0,unloadInvisibleTiles:!1,reuseTiles:!1,updateWhenIdle:!1});return e.on("tileload",Zoomer.scaleNonSquareTile),e},Zoomer.zoom_image=function(t){var e=t.container,i=t.tileURL,n=t.imageWidth,o=t.imageHeight,s=$("#"+e),a={};Zoomer.zoomers[e]?a=Zoomer.zoomers[e]:(Zoomer.zoomers[e]=a,a.container=s),a.map&&a.tiles&&(a.map.removeLayer(a.tiles),a.map.options.minZoom=0,a.map._sizeChanged=!0),a.currentMapTileSize=Zoomer._realTileSize,a.containerName=e,a.imageWidth=n,a.imageHeight=o,a.tileURL=i,a.noTiles=-1===a.tileURL.indexOf("{x}"),Zoomer.computeZoomScale(a),Zoomer.setupMap(a),a.tiles=Zoomer.createTiles(a),a.map.centerImageAtExtents(),a.map.addLayer(a.tiles),$("#"+a.containerName+" .leaflet-layer").each(function(){this.style[L.DomUtil.TRANSFORM]=L.DomUtil.getScaleString(a.tileLayerScale,a.map.getPixelOrigin().multiplyBy(-1))})},Zoomer.windowResized=function(){var t,e;for(t in Zoomer.zoomers)Zoomer.zoomers.hasOwnProperty(t)&&(e=Zoomer.zoomers[t],Zoomer.zoom_image({container:e.containerName,tileURL:e.tileURL,imageWidth:e.imageWidth,imageHeight:e.imageHeight}))},$(window).resize(function(){clearTimeout(Zoomer.resizeTimer),Zoomer.resizeTimer=setTimeout(Zoomer.windowResized,100)}),function(t){t.fn.extend({actual:function(e,i){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var n,o,s={absolute:!1,clone:!1,includeMargin:!1},a=t.extend(s,i),r=this.eq(0);if(a.clone===!0)n=function(){var t="position: absolute !important; top: -1000 !important; ";r=r.clone().attr("style",t).appendTo("body")},o=function(){r.remove()};else{var l,h=[],u="";n=function(){l=t.fn.jquery>="1.8.0"?r.parents().addBack().filter(":hidden"):r.parents().andSelf().filter(":hidden"),u+="visibility: hidden !important; display: block !important; ",a.absolute===!0&&(u+="position: absolute !important; "),l.each(function(){var e=t(this);h.push(e.attr("style")),e.attr("style",u)})},o=function(){l.each(function(e){var i=t(this),n=h[e];void 0===n?i.removeAttr("style"):i.attr("style",n)})}}n();var c=/(outer)/g.test(e)?r[e](a.includeMargin):r[e]();return o(),c}})}(jQuery),function(t,e,i){function n(i,n,o){var s=e.createElement(i);return n&&(s.id=te+n),o&&(s.style.cssText=o),t(s)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function s(t){var e=L.length,i=(H+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?("x"===e?M.width():o())/100:1)*parseInt(t,10))}function r(t,e){return t.photo||t.photoRegex.test(e)}function l(t,e){return t.retinaUrl&&i.devicePixelRatio>1?e.replace(t.photoRegex,t.retinaSuffix):e}function h(t){"contains"in _[0]&&!_[0].contains(t.target)&&(t.stopPropagation(),_.focus())
}function u(){var e,i=t.data(Z,Q);null==i?(N=t.extend({},J),console&&console.log&&console.log("Error: cboxElement missing settings object")):N=t.extend({},i);for(e in N)t.isFunction(N[e])&&"on"!==e.slice(0,2)&&(N[e]=N[e].call(Z));N.rel=N.rel||Z.rel||t(Z).data("rel")||"nofollow",N.href=N.href||t(Z).attr("href"),N.title=N.title||Z.title,"string"==typeof N.href&&(N.href=t.trim(N.href))}function c(i,n){t(e).trigger(i),le.trigger(i),t.isFunction(n)&&n.call(Z)}function d(){var t,e,i,n,o,s=te+"Slideshow_",a="click."+te;N.slideshow&&L[1]?(e=function(){clearTimeout(t)},i=function(){(N.loop||L[H+1])&&(t=setTimeout(X.next,N.slideshowSpeed))},n=function(){D.html(N.slideshowStop).unbind(a).one(a,o),le.bind(oe,i).bind(ne,e).bind(se,o),_.removeClass(s+"off").addClass(s+"on")},o=function(){e(),le.unbind(oe,i).unbind(ne,e).unbind(se,o),D.html(N.slideshowStart).unbind(a).one(a,function(){X.next(),n()}),_.removeClass(s+"on").addClass(s+"off")},N.slideshowAuto?n():o()):_.removeClass(s+"off "+s+"on")}function m(i){q||(Z=i,u(),L=t(Z),H=0,"nofollow"!==N.rel&&(L=t("."+ee).filter(function(){var e,i=t.data(this,Q);return i&&(e=t(this).data("rel")||i.rel||this.rel),e===N.rel}),H=L.index(Z),-1===H&&(L=L.add(Z),H=L.length-1)),v.css({opacity:parseFloat(N.opacity),cursor:N.overlayClose?"pointer":"auto",visibility:"visible"}).show(),Y&&_.add(v).removeClass(Y),N.className&&_.add(v).addClass(N.className),Y=N.className,I.html(N.close).show(),$||($=V=!0,_.css({visibility:"hidden",display:"block"}),S=n(he,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(w),U=b.height()+P.height()+w.outerHeight(!0)-w.height(),O=x.width()+T.width()+w.outerWidth(!0)-w.width(),F=S.outerHeight(!0),R=S.outerWidth(!0),N.w=a(N.initialWidth,"x"),N.h=a(N.initialHeight,"y"),X.position(),d(),c(ie,N.onOpen),B.add(k).hide(),_.focus(),e.addEventListener&&(e.addEventListener("focus",h,!0),le.one(ae,function(){e.removeEventListener("focus",h,!0)})),N.returnFocus&&le.one(ae,function(){t(Z).focus()})),g())}function p(){!_&&e.body&&(K=!1,M=t(i),_=n(he).attr({id:Q,"class":t.support.opacity===!1?te+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(he,"Overlay").hide(),C=n(he,"LoadingOverlay").add(n(he,"LoadingGraphic")),y=n(he,"Wrapper"),w=n(he,"Content").append(k=n(he,"Title"),j=n(he,"Current"),A=t('<button type="button"/>').attr({id:te+"Previous"}),z=t('<button type="button"/>').attr({id:te+"Next"}),D=n("button","Slideshow"),C,I=t('<button type="button"/>').attr({id:te+"Close"})),y.append(n(he).append(n(he,"TopLeft"),b=n(he,"TopCenter"),n(he,"TopRight")),n(he,!1,"clear:left").append(x=n(he,"MiddleLeft"),w,T=n(he,"MiddleRight")),n(he,!1,"clear:left").append(n(he,"BottomLeft"),P=n(he,"BottomCenter"),n(he,"BottomRight"))).find("div div").css({"float":"left"}),E=n(he,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),B=z.add(A).add(j).add(D),t(e.body).append(v,_.append(y,E)))}function f(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.control||(t.preventDefault(),m(this))}return _?(K||(K=!0,z.click(function(){X.next()}),A.click(function(){X.prev()}),I.click(function(){X.close()}),v.click(function(){N.overlayClose&&X.close()}),t(e).bind("keydown."+te,function(t){var e=t.keyCode;$&&N.escKey&&27===e&&(t.preventDefault(),X.close()),$&&N.arrowKey&&L[1]&&!t.altKey&&(37===e?(t.preventDefault(),A.click()):39===e&&(t.preventDefault(),z.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+te,"."+ee,i):t("."+ee).live("click."+te,i)),!0):!1}function g(){var e,o,s,h=X.prep,d=++ue;V=!0,W=!1,Z=L[H],u(),c(re),c(ne,N.onLoad),N.h=N.height?a(N.height,"y")-F-U:N.innerHeight&&a(N.innerHeight,"y"),N.w=N.width?a(N.width,"x")-R-O:N.innerWidth&&a(N.innerWidth,"x"),N.mw=N.w,N.mh=N.h,N.maxWidth&&(N.mw=a(N.maxWidth,"x")-R-O,N.mw=N.w&&N.w<N.mw?N.w:N.mw),N.maxHeight&&(N.mh=a(N.maxHeight,"y")-F-U,N.mh=N.h&&N.h<N.mh?N.h:N.mh),e=N.href,G=setTimeout(function(){C.show()},100),N.inline?(s=n(he).hide().insertBefore(t(e)[0]),le.one(re,function(){s.replaceWith(S.children())}),h(t(e))):N.iframe?h(" "):N.html?h(N.html):r(N,e)?(e=l(N,e),t(W=new Image).addClass(te+"Photo").bind("error",function(){N.title=!1,h(n(he,"Error").html(N.imgError))}).one("load",function(){var e;d===ue&&(W.alt=t(Z).attr("alt")||t(Z).attr("data-alt")||"",N.retinaImage&&i.devicePixelRatio>1&&(W.height=W.height/i.devicePixelRatio,W.width=W.width/i.devicePixelRatio),N.scalePhotos&&(o=function(){W.height-=W.height*e,W.width-=W.width*e},N.mw&&W.width>N.mw&&(e=(W.width-N.mw)/W.width,o()),N.mh&&W.height>N.mh&&(e=(W.height-N.mh)/W.height,o())),N.h&&(W.style.marginTop=Math.max(N.mh-W.height,0)/2+"px"),L[1]&&(N.loop||L[H+1])&&(W.style.cursor="pointer",W.onclick=function(){X.next()}),W.style.width=W.width+"px",W.style.height=W.height+"px",setTimeout(function(){h(W)},1))}),setTimeout(function(){W.src=e},1)):e&&E.load(e,N.data,function(e,i){d===ue&&h("error"===i?n(he,"Error").html(N.xhrError):t(this).contents())})}var v,_,y,w,b,x,T,P,L,M,S,E,C,k,j,D,z,A,I,B,N,U,O,F,R,Z,H,W,$,V,q,G,X,Y,K,J={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},Q="colorbox",te="cbox",ee=te+"Element",ie=te+"_open",ne=te+"_load",oe=te+"_complete",se=te+"_cleanup",ae=te+"_closed",re=te+"_purge",le=t("<a/>"),he="div",ue=0;t.colorbox||(t(p),X=t.fn[Q]=t[Q]=function(e,i){var n=this;if(e=e||{},p(),f()){if(t.isFunction(n))n=t("<a/>"),e.open=!0;else if(!n[0])return n;i&&(e.onComplete=i),n.each(function(){t.data(this,Q,t.extend({},t.data(this,Q)||J,e))}).addClass(ee),(t.isFunction(e.open)&&e.open.call(n)||e.open)&&m(n[0])}return n},X.position=function(t,e){function i(t){b[0].style.width=P[0].style.width=w[0].style.width=parseInt(t.style.width,10)-O+"px",w[0].style.height=x[0].style.height=T[0].style.height=parseInt(t.style.height,10)-U+"px"}var n,s,r,l=0,h=0,u=_.offset();M.unbind("resize."+te),_.css({top:-9e4,left:-9e4}),s=M.scrollTop(),r=M.scrollLeft(),N.fixed?(u.top-=s,u.left-=r,_.css({position:"fixed"})):(l=s,h=r,_.css({position:"absolute"})),h+=N.right!==!1?Math.max(M.width()-N.w-R-O-a(N.right,"x"),0):N.left!==!1?a(N.left,"x"):Math.round(Math.max(M.width()-N.w-R-O,0)/2),l+=N.bottom!==!1?Math.max(o()-N.h-F-U-a(N.bottom,"y"),0):N.top!==!1?a(N.top,"y"):Math.round(Math.max(o()-N.h-F-U,0)/2),_.css({top:u.top,left:u.left,visibility:"visible"}),t=_.width()===N.w+R&&_.height()===N.h+F?0:t||0,y[0].style.width=y[0].style.height="9999px",n={width:N.w+R+O,height:N.h+F+U,top:l,left:h},0===t&&_.css(n),_.dequeue().animate(n,{duration:t,complete:function(){i(this),V=!1,y[0].style.width=N.w+R+O+"px",y[0].style.height=N.h+F+U+"px",N.reposition&&setTimeout(function(){M.bind("resize."+te,X.position)},1),e&&e()},step:function(){i(this)}})},X.resize=function(t){$&&(t=t||{},t.width&&(N.w=a(t.width,"x")-R-O),t.innerWidth&&(N.w=a(t.innerWidth,"x")),S.css({width:N.w}),t.height&&(N.h=a(t.height,"y")-F-U),t.innerHeight&&(N.h=a(t.innerHeight,"y")),t.innerHeight||t.height||(S.css({height:"auto"}),N.h=S.height()),S.css({height:N.h}),X.position("none"===N.transition?0:N.speed))},X.prep=function(e){function i(){return N.w=N.w||S.width(),N.w=N.mw&&N.mw<N.w?N.mw:N.w,N.w}function o(){return N.h=N.h||S.height(),N.h=N.mh&&N.mh<N.h?N.mh:N.h,N.h}if($){var a,h="none"===N.transition?0:N.speed;S.empty().remove(),S=n(he,"LoadedContent").append(e),S.hide().appendTo(E.show()).css({width:i(),overflow:N.scrolling?"auto":"hidden"}).css({height:o()}).prependTo(w),E.hide(),t(W).css({"float":"none"}),a=function(){function e(){t.support.opacity===!1&&_[0].style.removeAttribute("filter")}var i,o,a=L.length,u="frameBorder",d="allowTransparency";$&&(o=function(){clearTimeout(G),C.hide(),c(oe,N.onComplete)},k.html(N.title).add(S).show(),a>1?("string"==typeof N.current&&j.html(N.current.replace("{current}",H+1).replace("{total}",a)).show(),z[N.loop||a-1>H?"show":"hide"]().html(N.next),A[N.loop||H?"show":"hide"]().html(N.previous),N.slideshow&&D.show(),N.preloading&&t.each([s(-1),s(1)],function(){var e,i,n=L[this],o=t.data(n,Q);o&&o.href?(e=o.href,t.isFunction(e)&&(e=e.call(n))):e=t(n).attr("href"),e&&r(o,e)&&(e=l(o,e),i=new Image,i.src=e)})):B.hide(),N.iframe?(i=n("iframe")[0],u in i&&(i[u]=0),d in i&&(i[d]="true"),N.scrolling||(i.scrolling="no"),t(i).attr({src:N.href,name:(new Date).getTime(),"class":te+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",o).appendTo(S),le.one(re,function(){i.src="//about:blank"}),N.fastIframe&&t(i).trigger("load")):o(),"fade"===N.transition?_.fadeTo(h,1,e):e())},"fade"===N.transition?_.fadeTo(h,0,function(){X.position(0,a)}):X.position(h,a)}},X.next=function(){!V&&L[1]&&(N.loop||L[H+1])&&(H=s(1),m(L[H]))},X.prev=function(){!V&&L[1]&&(N.loop||H)&&(H=s(-1),m(L[H]))},X.close=function(){$&&!q&&(q=!0,$=!1,c(se,N.onCleanup),M.unbind("."+te),v.fadeTo(N.fadeOut||0,0),_.stop().fadeTo(N.fadeOut||0,0,function(){_.add(v).css({opacity:1,cursor:"auto"}).hide(),c(re),S.empty().remove(),setTimeout(function(){q=!1,c(ae,N.onClosed)},1)}))},X.remove=function(){_&&(_.stop(),t.colorbox.close(),_.stop().remove(),v.remove(),q=!1,_=null,t("."+ee).removeData(Q).removeClass(ee),t(e).unbind("click."+te))},X.element=function(){return t(Z)},X.settings=J)}(jQuery,document,window),jQuery&&function(t){function e(e){var s=t.extend({},l,e||{});return t(this).each(function(){var e=t(this);if(!e.data("scroller")){var a;a='<div class="scroller-bar"><div class="scroller-track"><div class="scroller-handle">',a+="</div></div></div>",s.paddingRight=parseInt(e.css("padding-right"),10),s.paddingBottom=parseInt(e.css("padding-bottom"),10),e.addClass(s.customClass+" scroller").wrapInner('<div class="scroller-content" />').prepend(a),s.horizontal&&e.addClass("scroller-horizontal");var r=t.extend({$scroller:e,$content:e.find(".scroller-content"),$bar:e.find(".scroller-bar"),$track:e.find(".scroller-track"),$handle:e.find(".scroller-handle")},s);r.$content.on("scroll.scroller",r,i),r.$scroller.on("mousedown.scroller",".scroller-track",r,n).on("mousedown.scroller",".scroller-handle",r,o).data("scroller",r),h.reset.apply(e,[r]),t(window).one("load",function(){h.reset.apply(e,[r])})}})}function i(t){if(t.preventDefault(),t.stopPropagation(),t=t.data,!0==t.horizontal){var e=t.$content.scrollLeft();0>e&&(e=0),e/=t.scrollRatio,e>t.handleBounds.right&&(e=t.handleBounds.right),t.$handle.css({left:e})}else e=t.$content.scrollTop(),0>e&&(e=0),e/=t.scrollRatio,e>t.handleBounds.bottom&&(e=t.handleBounds.bottom),t.$handle.css({top:e})}function n(e){e.preventDefault(),e.stopPropagation();var i=e.data,n=i.$track.offset();!0==i.horizontal?(i.mouseStart=e.pageX,i.handleLeft=e.pageX-n.left-i.handleWidth/2,r.apply(i.$scroller,[i,i.handleLeft])):(i.mouseStart=e.pageY,i.handleTop=e.pageY-n.top-i.handleHeight/2,r.apply(i.$scroller,[i,i.handleTop])),i.$scroller.data("scroller",i),i.$content.off(".scroller"),t("body").on("mousemove.scroller",i,s).on("mouseup.scroller",i,a)}function o(e){e.preventDefault(),e.stopPropagation();var i=e.data;!0==i.horizontal?(i.mouseStart=e.pageX,i.handleLeft=parseInt(i.$handle.css("left"),10)):(i.mouseStart=e.pageY,i.handleTop=parseInt(i.$handle.css("top"),10)),i.$scroller.data("scroller",i),i.$content.off(".scroller"),t("body").on("mousemove.scroller",i,s).on("mouseup.scroller",i,a)}function s(t){t.preventDefault(),t.stopPropagation();var e=t.data,i=0;!0==e.horizontal?(t=e.mouseStart-t.pageX,i=e.handleLeft-t):(t=e.mouseStart-t.pageY,i=e.handleTop-t),r.apply(e.$scroller,[e,i])}function a(e){e.preventDefault(),e.stopPropagation(),e=e.data,e.$content.on("scroll.scroller",e,i),t("body").off(".scroller")}function r(t,e){if(!0==t.horizontal){t.handleBounds.left>e&&(e=t.handleBounds.left),e>t.handleBounds.right&&(e=t.handleBounds.right);var i=Math.round(e*t.scrollRatio);t.$handle.css({left:e}),t.$content.scrollLeft(i)}else t.handleBounds.top>e&&(e=t.handleBounds.top),e>t.handleBounds.bottom&&(e=t.handleBounds.bottom),i=Math.round(e*t.scrollRatio),t.$handle.css({top:e}),t.$content.scrollTop(i)}var l={customClass:"",trackMargin:0,handleSize:!1,horizontal:!1},h={defaults:function(e){return l=t.extend(l,e||{}),t(this)},destroy:function(){return t(this).each(function(){var e=t(this).data("scroller");e&&(e.$scroller.removeClass(e.customClass).removeClass("scroller").removeClass("scroller-active"),e.$content.replaceWith(e.$content.html()),e.$bar.remove(),e.$content.unbind("scroll",i),e.$scroller.off(".scroller").removeData("scroller"))})},scroll:function(e){var i=t(this).data("scroller");return"number"!=typeof e&&(e=t(e),e.length>0?(e=e.position(),e=!0==i.horizontal?e.left+i.$content.scrollLeft():e.top+i.$content.scrollTop()):e=i.$content.scrollTop()),!0==i.horizontal?i.$content.scrollLeft(e):i.$content.scrollTop(e),t(this)},reset:function(e){return t(this).each(function(){var i=e||t(this).data("scroller");if(i!==void 0){if(i.$scroller.addClass("scroller-setup"),!0==i.horizontal)i.barHeight=i.$content[0].offsetHeight-i.$content[0].clientHeight,i.frameWidth=i.$content.outerWidth(),i.trackWidth=i.frameWidth-2*i.trackMargin,i.scrollWidth=i.$content[0].scrollWidth,i.ratio=i.trackWidth/i.scrollWidth,i.trackRatio=i.trackWidth/i.scrollWidth,i.handleWidth=i.handleSize?i.handleSize:i.trackWidth*i.trackRatio,i.scrollRatio=(i.scrollWidth-i.frameWidth)/(i.trackWidth-i.handleWidth),i.handleBounds={left:0,right:i.trackWidth-i.handleWidth},i.$scroller.data("scroller",i),i.$content.css({paddingBottom:i.barHeight+i.paddingBottom}),i.$content.scrollLeft(),i.scrollWidth<=i.frameWidth?i.$scroller.removeClass("scroller-active"):i.$scroller.addClass("scroller-active"),i.$bar.css({width:i.frameWidth}),i.$track.css({width:i.trackWidth,marginLeft:i.trackMargin,marginRight:i.trackMargin}),i.$handle.css({width:i.handleWidth});else{i.barWidth=i.$content[0].offsetWidth-i.$content[0].clientWidth,i.frameHeight=i.$content.outerHeight(),i.trackHeight=i.frameHeight-2*i.trackMargin,i.scrollHeight=i.$content[0].scrollHeight,i.ratio=i.trackHeight/i.scrollHeight,i.trackRatio=i.trackHeight/i.scrollHeight,i.handleHeight=i.handleSize?i.handleSize:i.trackHeight*i.trackRatio,i.scrollRatio=(i.scrollHeight-i.frameHeight)/(i.trackHeight-i.handleHeight),i.handleBounds={top:0,bottom:i.trackHeight-i.handleHeight},i.$scroller.data("scroller",i);var n=i.$content.scrollTop()*i.ratio;i.scrollHeight<=i.frameHeight?i.$scroller.removeClass("scroller-active"):i.$scroller.addClass("scroller-active"),i.$bar.css({height:i.frameHeight}),i.$track.css({height:i.trackHeight,marginBottom:i.trackMargin,marginTop:i.trackMargin}),i.$handle.css({height:i.handleHeight})}r.apply(i.$scroller,[i,n]),i.$scroller.removeClass("scroller-setup")}})}};t.fn.scroller=function(t){return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?this:e.apply(this,arguments)}}(jQuery),function(t,e,i){var n,o;typeof exports!=i+""?n=exports:(o=t.L,n={},n.noConflict=function(){return t.L=o,this},t.L=n),n.version="0.5",n.Util={extend:function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;n>i;i++){o=s[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),limitExecByInterval:function(t,e,n){var o,s;return function a(){var r=arguments;return o?(s=!0,i):(o=!0,setTimeout(function(){o=!1,s&&(a.apply(n,r),s=!1)},e),t.apply(n,r),i)}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},splitWords:function(t){return t.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(t,e){return t.options=n.extend({},t.options,e),t.options},getParamString:function(t,e){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(n+"="+t[n]);return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var n=e[i];if(!e.hasOwnProperty(i))throw Error("No value provided for variable "+t);return n})},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;o.length>i&&!n;i++)n=t[o[i]+e];return n}function o(e){var i=+new Date,n=Math.max(0,16-(i-s));return s=i+n,t.setTimeout(e,n)}var s=0,a=t.requestAnimationFrame||e("RequestAnimationFrame")||o,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};n.Util.requestAnimFrame=function(e,s,r,l){return e=n.bind(e,s),r&&a===o?(e(),i):a.call(t,e,l)},n.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),n.extend=n.Util.extend,n.bind=n.Util.bind,n.stamp=n.Util.stamp,n.setOptions=n.Util.setOptions,n.Class=function(){},n.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var o=new i;o.constructor=e,e.prototype=o;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);t.statics&&(n.extend(e,t.statics),delete t.statics),t.includes&&(n.Util.extend.apply(null,[o].concat(t.includes)),delete t.includes),t.options&&o.options&&(t.options=n.extend({},o.options,t.options)),n.extend(o,t),o._initHooks=[];var a=this;return o.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;e>t;t++)o._initHooks[t].call(this)}},e},n.Class.include=function(t){n.extend(this.prototype,t)},n.Class.mergeOptions=function(t){n.extend(this.prototype.options,t)},n.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var s="_leaflet_events";n.Mixin={},n.Mixin.Events={addEventListener:function(t,e,i){var o,a,r,l=this[s]=this[s]||{};if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&this.addEventListener(o,t[o],e);return this}for(t=n.Util.splitWords(t),a=0,r=t.length;r>a;a++)l[t[a]]=l[t[a]]||[],l[t[a]].push({action:e,context:i||this});return this},hasEventListeners:function(t){return s in this&&t in this[s]&&this[s][t].length>0},removeEventListener:function(t,e,i){var o,a,r,l,h,u=this[s];if("object"==typeof t){for(o in t)t.hasOwnProperty(o)&&this.removeEventListener(o,t[o],e);return this}for(t=n.Util.splitWords(t),a=0,r=t.length;r>a;a++)if(this.hasEventListeners(t[a]))for(l=u[t[a]],h=l.length-1;h>=0;h--)e&&l[h].action!==e||i&&l[h].context!==i||l.splice(h,1);return this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;for(var i=n.extend({type:t,target:this},e),o=this[s][t].slice(),a=0,r=o.length;r>a;a++)o[a].action.call(o[a].context||this,i);return this}},n.Mixin.Events.on=n.Mixin.Events.addEventListener,n.Mixin.Events.off=n.Mixin.Events.removeEventListener,n.Mixin.Events.fire=n.Mixin.Events.fireEvent,function(){var o=!!t.ActiveXObject,s=o&&!t.XMLHttpRequest,a=o&&!e.querySelector,r=navigator.userAgent.toLowerCase(),l=-1!==r.indexOf("webkit"),h=-1!==r.indexOf("chrome"),u=-1!==r.indexOf("android"),c=-1!==r.search("android [23]"),d=typeof orientation!=i+"",m=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,p="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,f=e.documentElement,g=o&&"transition"in f.style,v="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,_="MozPerspective"in f.style,y="OTransition"in f.style,w=!t.L_DISABLE_3D&&(g||v||_||y),b=!t.L_NO_TOUCH&&function(){var t="ontouchstart";if(m||t in f)return!0;var i=e.createElement("div"),n=!1;return i.setAttribute?(i.setAttribute(t,"return;"),"function"==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n):!1}();n.Browser={ie:o,ie6:s,ie7:a,webkit:l,android:u,android23:c,chrome:h,ie3d:g,webkit3d:v,gecko3d:_,opera3d:y,any3d:w,mobile:d,mobileWebkit:d&&l,mobileWebkit3d:d&&v,mobileOpera:d&&t.opera,touch:b,msTouch:m,retina:p}}(),n.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},n.Point.prototype={clone:function(){return new n.Point(this.x,this.y)},add:function(t){return this.clone()._add(n.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(n.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=n.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t.x===this.x&&t.y===this.y},toString:function(){return"Point("+n.Util.formatNum(this.x)+", "+n.Util.formatNum(this.y)+")"}},n.point=function(t,e,i){return t instanceof n.Point?t:n.Util.isArray(t)?new n.Point(t[0],t[1]):isNaN(t)?t:new n.Point(t,e,i)},n.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},n.Bounds.prototype={extend:function(t){return t=n.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new n.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new n.Point(this.min.x,this.max.y)},getTopRight:function(){return new n.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof n.Point?n.point(t):n.bounds(t),t instanceof n.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=n.bounds(t);var e=this.min,i=this.max,o=t.min,s=t.max,a=s.x>=e.x&&o.x<=i.x,r=s.y>=e.y&&o.y<=i.y;return a&&r},isValid:function(){return!(!this.min||!this.max)}},n.bounds=function(t,e){return!t||t instanceof n.Bounds?t:new n.Bounds(t,e)},n.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},n.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new n.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},n.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,o=0,s=0,a=t,r=e.body,l=n.Browser.ie7;do{if(o+=a.offsetTop||0,s+=a.offsetLeft||0,o+=parseInt(n.DomUtil.getStyle(a,"borderTopWidth"),10)||0,s+=parseInt(n.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,i=n.DomUtil.getStyle(a,"position"),a.offsetParent===r&&"absolute"===i)break;if("fixed"===i){o+=r.scrollTop||0,s+=r.scrollLeft||0;break}a=a.offsetParent}while(a);a=t;do{if(a===r)break;o-=a.scrollTop||0,s-=a.scrollLeft||0,n.DomUtil.documentIsLtr()||!n.Browser.webkit&&!l||(s+=a.scrollWidth-a.clientWidth,l&&"hidden"!==n.DomUtil.getStyle(a,"overflow-y")&&"hidden"!==n.DomUtil.getStyle(a,"overflow")&&(s+=17)),a=a.parentNode}while(a);return new n.Point(s,o)},documentIsLtr:function(){return n.DomUtil._docIsLtrCached||(n.DomUtil._docIsLtrCached=!0,n.DomUtil._docIsLtr="ltr"===n.DomUtil.getStyle(e.body,"direction")),n.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},disableTextSelection:function(){e.selection&&e.selection.empty&&e.selection.empty(),this._onselectstart||(this._onselectstart=e.onselectstart||null,e.onselectstart=n.Util.falseFn)},enableTextSelection:function(){e.onselectstart===n.Util.falseFn&&(e.onselectstart=this._onselectstart,this._onselectstart=null)},hasClass:function(t,e){return t.className.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){n.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){function i(t,i){return i===e?"":t}t.className=t.className.replace(/(\S+)\s*/g,i).replace(/(^\s+|\s+$)/,"")},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(o){}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;t.length>n;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=n.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",o=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+o},getScaleString:function(t,e){var i=n.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),o=" scale("+t+") ";return i+o},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&n.Browser.any3d?(t.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(e),n.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},n.DomUtil.TRANSFORM=n.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),n.DomUtil.TRANSITION=n.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),n.DomUtil.TRANSITION_END="webkitTransition"===n.DomUtil.TRANSITION||"OTransition"===n.DomUtil.TRANSITION?n.DomUtil.TRANSITION+"End":"transitionend",n.LatLng=function(t,e){var i=parseFloat(t),n=parseFloat(e);if(isNaN(i)||isNaN(n))throw Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=i,this.lng=n},n.extend(n.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),n.LatLng.prototype={equals:function(t){if(!t)return!1;t=n.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n.LatLng.MAX_MARGIN>=e},toString:function(t){return"LatLng("+n.Util.formatNum(this.lat,t)+", "+n.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=n.latLng(t);var e=6378137,i=n.LatLng.DEG_TO_RAD,o=(t.lat-this.lat)*i,s=(t.lng-this.lng)*i,a=this.lat*i,r=t.lat*i,l=Math.sin(o/2),h=Math.sin(s/2),u=l*l+h*h*Math.cos(a)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new n.LatLng(this.lat,i)}},n.latLng=function(t,e){return t instanceof n.LatLng?t:n.Util.isArray(t)?new n.LatLng(t[0],t[1]):isNaN(t)?t:new n.LatLng(t,e)},n.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},n.LatLngBounds.prototype={extend:function(t){return t="number"==typeof t[0]||"string"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t),t instanceof n.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new n.LatLng(t.lat,t.lng),this._northEast=new n.LatLng(t.lat,t.lng)):t instanceof n.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new n.LatLngBounds(new n.LatLng(e.lat-o,e.lng-s),new n.LatLng(i.lat+o,i.lng+s))},getCenter:function(){return new n.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new n.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new n.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(t){t="number"==typeof t[0]||t instanceof n.LatLng?n.latLng(t):n.latLngBounds(t);var e,i,o=this._southWest,s=this._northEast;return t instanceof n.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=o.lat&&i.lat<=s.lat&&e.lng>=o.lng&&i.lng<=s.lng},intersects:function(t){t=n.latLngBounds(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),s=t.getNorthEast(),a=s.lat>=e.lat&&o.lat<=i.lat,r=s.lng>=e.lng&&o.lng<=i.lng;return a&&r},toBBoxString:function(){var t=this._southWest,e=this._northEast;return[t.lng,t.lat,e.lng,e.lat].join(",")},equals:function(t){return t?(t=n.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},n.latLngBounds=function(t,e){return!t||t instanceof n.LatLngBounds?t:new n.LatLngBounds(t,e)},n.Projection={},n.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,a=o*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new n.Point(s,a)},unproject:function(t){var e=n.LatLng.RAD_TO_DEG,i=t.x*e,o=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new n.LatLng(o,i)}},n.Projection.LonLat={project:function(t){return new n.Point(t.lng,t.lat)},unproject:function(t){return new n.LatLng(t.y,t.x)}},n.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},n.CRS.Simple=n.extend({},n.CRS,{projection:n.Projection.LonLat,transformation:new n.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),n.CRS.EPSG3857=n.extend({},n.CRS,{code:"EPSG:3857",projection:n.Projection.SphericalMercator,transformation:new n.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),n.CRS.EPSG900913=n.extend({},n.CRS.EPSG3857,{code:"EPSG:900913"}),n.CRS.EPSG4326=n.extend({},n.CRS,{code:"EPSG:4326",projection:n.Projection.LonLat,transformation:new n.Transformation(1/360,.5,-1/360,.5)}),n.Map=n.Class.extend({includes:n.Mixin.Events,options:{crs:n.CRS.EPSG3857,fadeAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23,trackResize:!0,markerZoomAnimation:n.DomUtil.TRANSITION&&n.Browser.any3d},initialize:function(t,e){e=n.setOptions(this,e),this._initContainer(t),this._initLayout(),this.callInitHooks(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(n.latLng(e.center),e.zoom,!0),this._initLayers(e.layers)},setView:function(t,e){return this._resetView(n.latLng(t),this._limitZoom(e)),this},setZoom:function(t){return this.setView(this.getCenter(),t)
},zoomIn:function(t){return this.setZoom(this._zoom+(t||1))},zoomOut:function(t){return this.setZoom(this._zoom-(t||1))},fitBounds:function(t){var e=this.getBoundsZoom(t);return this.setView(n.latLngBounds(t).getCenter(),e)},fitWorld:function(){var t=new n.LatLng(-60,-170),e=new n.LatLng(85,179);return this.fitBounds(new n.LatLngBounds(t,e))},panTo:function(t){return this.setView(t,this._zoom)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(n.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(t=n.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(e>this._zoom?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this},panInsideBounds:function(t){t=n.latLngBounds(t);var e=this.getBounds(),i=this.project(e.getSouthWest()),o=this.project(e.getNorthEast()),s=this.project(t.getSouthWest()),a=this.project(t.getNorthEast()),r=0,l=0;return o.y<a.y&&(l=a.y-o.y),o.x>a.x&&(r=a.x-o.x),i.y>s.y&&(l=s.y-i.y),i.x<s.x&&(r=s.x-i.x),this.panBy(new n.Point(r,l,!0))},addLayer:function(t){var e=n.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this.whenReady(function(){t.onAdd(this),this.fire("layeradd",{layer:t})},this),this)},removeLayer:function(t){var e=n.stamp(t);if(this._layers[e])return t.onRemove(this),delete this._layers[e],this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&n.TileLayer&&t instanceof n.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:t})},hasLayer:function(t){var e=n.stamp(t);return this._layers.hasOwnProperty(e)},invalidateSize:function(t){var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=e._subtract(this.getSize())._divideBy(2)._round();return t===!0?this.panBy(i):(this._rawPanBy(i),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n.bind(this.fire,this,"moveend"),200)),this},addHandler:function(t,e){return e?(this[t]=new e(this),this.options[t]&&this[t].enable(),this):i},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new n.LatLngBounds(e,i)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===i?1/0:this.options.maxZoom,e=this._layersMaxZoom===i?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(t,e){t=n.latLngBounds(t);var i,o,s,a=this.getSize(),r=this.options.minZoom||0,l=this.getMaxZoom(),h=t.getNorthEast(),u=t.getSouthWest(),c=!0;e&&r--;do r++,o=this.project(h,r),s=this.project(u,r),i=new n.Point(Math.abs(o.x-s.x),Math.abs(s.y-o.y)),c=e?i.x<a.x||i.y<a.y:i.x<=a.x&&i.y<=a.y;while(c&&l>=r);return c&&e?null:e?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new n.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new n.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(n.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(n.point(t),e)},layerPointToLatLng:function(t){var e=n.point(t).add(this._initialTopLeftPoint);return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(n.latLng(t))._round();return e._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(t){return n.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return n.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(n.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(n.latLng(t)))},mouseEventToContainerPoint:function(t){return n.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=n.DomUtil.get(t);if(e._leaflet)throw Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;n.DomUtil.addClass(t,"leaflet-container"),n.Browser.touch&&n.DomUtil.addClass(t,"leaflet-touch"),this.options.fadeAnimation&&n.DomUtil.addClass(t,"leaflet-fade-anim");var e=n.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(n.DomUtil.addClass(t.markerPane,e),n.DomUtil.addClass(t.shadowPane,e),n.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return n.DomUtil.create("div",t,e||this._panes.objectsPane)},_initLayers:function(t){t=t?n.Util.isArray(t)?t:[t]:[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0;var e,i;for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,o){var s=this._zoom!==e;o||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):n.DomUtil.setPosition(this._mapPane,new n.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),this.fire("move"),(s||o)&&this.fire("zoomend"),this.fire("moveend",{hard:!i}),a&&this.fire("load")},_rawPanBy:function(t){n.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_updateZoomLevels:function(){var t,e=1/0,n=-1/0;for(t in this._zoomBoundLayers)if(this._zoomBoundLayers.hasOwnProperty(t)){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(n=Math.max(n,o.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e)},_initEvents:function(){if(n.DomEvent){n.DomEvent.on(this._container,"click",this._onMouseClick,this);var e,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,i=o.length;i>e;e++)n.DomEvent.on(this._container,o[e],this._fireMouseEvent,this);this.options.trackResize&&n.DomEvent.on(t,"resize",this._onResize,this)}},_onResize:function(){n.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=n.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&n.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),o=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(o);this.fire(e,{latlng:s,layerPoint:o,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(n.bind(this._clearTileBg,this),500))},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_getMapPanePos:function(){return n.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),n.map=function(t,e){return new n.Map(t,e)},n.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(t){var e=n.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*s,l=o*e,h=a/s,u=Math.sqrt(1-h*h),c=u*Math.sin(l);c=Math.pow((1-c)/(1+c),.5*u);var d=Math.tan(.5*(.5*Math.PI-l))/c;return l=-a*Math.log(d),new n.Point(r,l)},unproject:function(t){for(var e,i=n.LatLng.RAD_TO_DEG,o=this.R_MAJOR,s=this.R_MINOR,a=t.x*i/o,r=s/o,l=Math.sqrt(1-r*r),h=Math.exp(-t.y/s),u=Math.PI/2-2*Math.atan(h),c=15,d=1e-7,m=c,p=.1;Math.abs(p)>d&&--m>0;)e=l*Math.sin(u),p=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-u,u+=p;return new n.LatLng(u*i,a)}},n.CRS.EPSG3395=n.extend({},n.CRS,{code:"EPSG:3395",projection:n.Projection.Mercator,transformation:function(){var t=n.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new n.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*i),.5)}()}),n.TileLayer=n.Class.extend({includes:n.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:n.Browser.mobile,updateWhenIdle:n.Browser.mobile},initialize:function(t,e){e=n.setOptions(this,e),e.detectRetina&&n.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._initContainer(),this._createTileProto(),t.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=n.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,s=t.children,a=-e(1/0,-1/0);for(n=0,o=s.length;o>n;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)||(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){n.DomUtil.setOpacity(this._container,this.options.opacity);var t,e=this._tiles;if(n.Browser.webkit)for(t in e)e.hasOwnProperty(t)&&(e[t].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var t=this._map._panes.tilePane;(!this._container||t.empty)&&(this._container=n.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),t.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){var e=this._tiles;for(var i in e)e.hasOwnProperty(i)&&this.fire("tileunload",{tile:e[i]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),t&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||this.options.minZoom>e)){var o=new n.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),s=new n.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),a=new n.Bounds(o,s);this._addTilesFromCenterOut(a),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(a)}}},_addTilesFromCenterOut:function(t){var i,o,s,a=[],r=t.getCenter();for(i=t.min.y;t.max.y>=i;i++)for(o=t.min.x;t.max.x>=o;o++)s=new n.Point(o,i),this._tileShouldBeLoaded(s)&&a.push(s);var l=a.length;if(0!==l){a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var h=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,o=0;l>o;o++)this._addTile(a[o],h);this._container.appendChild(h)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;if(!this.options.continuousWorld){var e=this._getWrapTileNum();if(this.options.noWrap&&(0>t.x||t.x>=e)||0>t.y||t.y>=e)return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)this._tiles.hasOwnProperty(o)&&(e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(t.min.x>i||i>t.max.x||t.min.y>n||n>t.max.y)&&this._removeTile(o))},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(n.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._container&&this._container.removeChild(e),n.Browser.android||(e.src=n.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),o=this._getTile();n.DomUtil.setPosition(o,i,n.Browser.chrome||n.Browser.android23),this._tiles[t.x+":"+t.y]=o,this._loadTile(o,t),o.parentNode!==this._container&&e.appendChild(o)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return this._adjustTilePoint(t),n.Util.template(this._url,n.extend({s:this._getSubdomain(t),z:this._getZoomForUrl(),x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1)},_getSubdomain:function(t){var e=(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=n.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this.options.tileSize+"px",t.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(){var t=this._layer;this.src!==n.Util.emptyImageUrl&&(n.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),n.tileLayer=function(t,e){return new n.TileLayer(t,e)},n.TileLayer.WMS=n.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=n.extend({},this.defaultWmsParams);i.width=i.height=e.detectRetina&&n.Browser.retina?2*this.options.tileSize:this.options.tileSize;for(var o in e)this.options.hasOwnProperty(o)||(i[o]=e[o]);this.wmsParams=i,n.setOptions(this,e)},onAdd:function(t){var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=t.options.crs.code,n.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){this._adjustTilePoint(t);var i=this._map,o=i.options.crs,s=this.options.tileSize,a=t.multiplyBy(s),r=a.add(new n.Point(s,s)),l=o.project(i.unproject(a,e)),h=o.project(i.unproject(r,e)),u=[l.x,h.y,h.x,l.y].join(","),c=n.Util.template(this._url,{s:this._getSubdomain(t)});return c+n.Util.getParamString(this.wmsParams,c)+"&bbox="+u},setParams:function(t,e){return n.extend(this.wmsParams,t),e||this.redraw(),this}}),n.tileLayer.wms=function(t,e){return new n.TileLayer.WMS(t,e)},n.TileLayer.Canvas=n.TileLayer.extend({options:{async:!1},initialize:function(t){n.setOptions(this,t)},redraw:function(){var t=this._tiles;for(var e in t)t.hasOwnProperty(e)&&this._redrawTile(t[e])},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProto:function(){var t=this._canvasProto=n.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=n.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),n.tileLayer.canvas=function(t){return new n.TileLayer.Canvas(t)},n.ImageOverlay=n.Class.extend({includes:n.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=n.latLngBounds(e),n.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&n.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=n.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&n.Browser.any3d?n.DomUtil.addClass(this._image,"leaflet-zoom-animated"):n.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),n.extend(this._image,{galleryimg:"no",onselectstart:n.Util.falseFn,onmousemove:n.Util.falseFn,onload:n.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,o=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(s,t.zoom,t.center),l=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(r),h=r._add(l._multiplyBy(.5*(1-1/o)));i.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(h)+" scale("+o+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);n.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){n.DomUtil.setOpacity(this._image,this.options.opacity)}}),n.imageOverlay=function(t,e,i){return new n.ImageOverlay(t,e,i)},n.Icon=n.Class.extend({options:{className:""},initialize:function(t){n.setOptions(this,t)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(t){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(e);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var i,o=this.options,s=n.point(o[e+"Size"]);i="shadow"===e?n.point(o.shadowAnchor||o.iconAnchor):n.point(o.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+o.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t){var i;return n.Browser.ie6?(i=e.createElement("div"),i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(i=e.createElement("img"),i.src=t),i},_getIconUrl:function(t){return n.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),n.icon=function(t){return new n.Icon(t)},n.Icon.Default=n.Icon.extend({options:{iconSize:new n.Point(25,41),iconAnchor:new n.Point(12,41),popupAnchor:new n.Point(1,-34),shadowSize:new n.Point(41,41)},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];n.Browser.retina&&"icon"===t&&(t+="@2x");var i=n.Icon.Default.imagePath;if(!i)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),n.Icon.Default.imagePath=function(){var t,i,n,o,s=e.getElementsByTagName("script"),a=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=s.length;i>t;t++)if(n=s[t].src,o=n.match(a))return n.split(a)[0]+"/images"}(),n.Marker=n.Class.extend({includes:n.Mixin.Events,options:{icon:new n.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){n.setOptions(this,e),this._latlng=n.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._removeIcon(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=n.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this._map&&this._removeIcon(),this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,o=i?"leaflet-zoom-animated":"leaflet-zoom-hide",s=!1;this._icon||(this._icon=t.icon.createIcon(),t.title&&(this._icon.title=t.title),this._initInteraction(),s=1>this.options.opacity,n.DomUtil.addClass(this._icon,o),t.riseOnHover&&n.DomEvent.on(this._icon,"mouseover",this._bringToFront,this).on(this._icon,"mouseout",this._resetZIndex,this)),this._shadow||(this._shadow=t.icon.createShadow(),this._shadow&&(n.DomUtil.addClass(this._shadow,o),s=1>this.options.opacity)),s&&this._updateOpacity();var a=this._map._panes;a.markerPane.appendChild(this._icon),this._shadow&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var t=this._map._panes;this.options.riseOnHover&&n.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),t.markerPane.removeChild(this._icon),this._shadow&&t.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(t){n.DomUtil.setPosition(this._icon,t),this._shadow&&n.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];n.DomUtil.addClass(t,"leaflet-clickable"),n.DomEvent.on(t,"click",this._onMouseClick,this);for(var i=0;e.length>i;i++)n.DomEvent.on(t,e[i],this._fireMouseEvent,this);n.Handler.MarkerDrag&&(this.dragging=new n.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&n.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&n.DomEvent.preventDefault(t),"mousedown"!==t.type&&n.DomEvent.stopPropagation(t)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){n.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&n.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),n.marker=function(t,e){return new n.Marker(t,e)},n.DivIcon=n.Icon.extend({options:{iconSize:new n.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var t=e.createElement("div"),i=this.options;return i.html&&(t.innerHTML=i.html),i.bgPos&&(t.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),n.divIcon=function(t){return new n.DivIcon(t)},n.Map.mergeOptions({closePopupOnClick:!0}),n.Popup=n.Class.extend({includes:n.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new n.Point(0,6),autoPanPadding:new n.Point(5,5),className:"",zoomAnimation:!0},initialize:function(t,e){n.setOptions(this,t),this._source=e,this._animated=n.Browser.any3d&&this.options.zoomAnimation},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&n.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),this._animated&&t.on("zoomanim",this._zoomAnimation,this),t.options.closePopupOnClick&&t.on("preclick",this._close,this),this._update(),e&&n.DomUtil.setOpacity(this._container,1)},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),n.Util.falseFn(this._container.offsetWidth),t.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),t.options.fadeAnimation&&n.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(t){return this._latlng=n.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_close:function(){var t=this._map;t&&(t._popup=null,t.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),o=this._container=n.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=n.DomUtil.create("a",e+"-close-button",o),t.href="#close",t.innerHTML="&#215;",n.DomEvent.on(t,"click",this._onCloseButtonClick,this));var s=this._wrapper=n.DomUtil.create("div",e+"-content-wrapper",o);n.DomEvent.disableClickPropagation(s),this._contentNode=n.DomUtil.create("div",e+"-content",s),n.DomEvent.on(this._contentNode,"mousewheel",n.DomEvent.stopPropagation),this._tipContainer=n.DomUtil.create("div",e+"-tip-container",o),this._tip=n.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,s=this.options.maxHeight,a="leaflet-popup-scrolled";s&&o>s?(e.height=s+"px",n.DomUtil.addClass(t,a)):n.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=this.options.offset;e&&n.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);n.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,o=new n.Point(this._containerLeft,-e-this._containerBottom);this._animated&&o._add(n.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(o),a=this.options.autoPanPadding,r=t.getSize(),l=0,h=0;0>s.x&&(l=s.x-a.x),s.x+i>r.x&&(l=s.x+i-r.x+a.x),0>s.y&&(h=s.y-a.y),s.y+e>r.y&&(h=s.y+e-r.y+a.y),(l||h)&&t.panBy(new n.Point(l,h))}},_onCloseButtonClick:function(t){this._close(),n.DomEvent.stop(t)}}),n.popup=function(t,e){return new n.Popup(t,e)},n.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(t,e){var i=n.point(this.options.icon.options.popupAnchor)||new n.Point(0,0);return i=i.add(n.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=n.extend({offset:i},e),this._popup||this.on("click",this.openPopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popup=new n.Popup(e,this).setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup).off("remove",this.closePopup).off("move",this._movePopup)),this
},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),n.Map.include({openPopup:function(t){return this.closePopup(),this._popup=t,this.addLayer(t).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),n.LayerGroup=n.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=n.stamp(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=n.stamp(t);return delete this._layers[e],this._map&&this._map.removeLayer(t),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)this._layers.hasOwnProperty(e)&&(i=this._layers[e],i[t]&&i[t].apply(i,n));return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)this._layers.hasOwnProperty(i)&&t.call(e,this._layers[i])},setZIndex:function(t){return this.invoke("setZIndex",t)}}),n.layerGroup=function(t){return new n.LayerGroup(t)},n.FeatureGroup=n.LayerGroup.extend({includes:n.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu"},addLayer:function(t){return this._layers[n.stamp(t)]?this:(t.on(n.FeatureGroup.EVENTS,this._propagateEvent,this),n.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return t.off(n.FeatureGroup.EVENTS,this._propagateEvent,this),n.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new n.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof n.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t.layer=t.target,t.target=this,this.fire(t.type,t)}}),n.featureGroup=function(t){return new n.FeatureGroup(t)},n.Path=n.Class.extend({includes:[n.Mixin.Events],statics:{CLIP_PADDING:n.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(t.innerWidth,t.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){n.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,n.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return n.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),n.Map.include({_updatePathViewport:function(){var t=n.Path.CLIP_PADDING,e=this.getSize(),i=n.DomUtil.getPosition(this._mapPane),o=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=o.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new n.Bounds(o,s)}}),n.Path.SVG_NS="http://www.w3.org/2000/svg",n.Browser.svg=!(!e.createElementNS||!e.createElementNS(n.Path.SVG_NS,"svg").createSVGRect),n.Path=n.Path.extend({statics:{SVG:n.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(n.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(n.Browser.svg||!n.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),n.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;t.length>e;e++)n.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),o=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(o);this.fire(t.type,{latlng:s,layerPoint:o,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&n.DomEvent.preventDefault(t),"mousemove"!==t.type&&n.DomEvent.stopPropagation(t)}}}),n.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=n.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&n.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,o=i.x-e.x,s=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;n.Browser.mobileWebkit&&r.removeChild(a),n.DomUtil.setPosition(a,e),a.setAttribute("width",o),a.setAttribute("height",s),a.setAttribute("viewBox",[e.x,e.y,o,s].join(" ")),n.Browser.mobileWebkit&&r.appendChild(a)}}}),n.Path.include({bindPopup:function(t,e){return(!this._popup||e)&&(this._popup=new n.Popup(e,this)),this._popup.setContent(t),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),n.Browser.vml=!n.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),n.Path=n.Browser.svg||!n.Browser.vml?n.Path:n.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");n.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&n.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?i.dashArray instanceof Array?i.dashArray.join(" "):i.dashArray.replace(/ *, */g," "):""):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),n.Map.include(n.Browser.svg||!n.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),n.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),n.Path=n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?n.Path:n.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return n.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&this._map.off("click",this._onClick,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!n.Path._updateRequest&&(n.Path._updateRequest=n.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){n.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,o,s,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,o=this._parts[t].length;o>e;e++)s=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](s.x,s.y);this instanceof n.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",{latlng:t.latlng,layerPoint:t.layerPoint,containerPoint:t.containerPoint,originalEvent:t})}}),n.Map.include(n.Path.SVG&&!t.L_PREFER_CANVAS||!n.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),o=this._pathRoot;n.DomUtil.setPosition(o,e),o.width=i.x,o.height=i.y,o.getContext("2d").translate(-e.x,-e.y)}}}),n.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var a,r=[];for(a=0;n>a;a++)s[a]&&r.push(t[a]);return r},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,l=0;for(a=n+1;o-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),r>l&&(s=a,l=r);l>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;s>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return s-1>o&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o,s,a,r=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(r|l))return[t,e];if(r&l)return!1;o=r||l,s=this._getEdgeIntersection(t,e,o,i),a=this._getBitCode(s,i),o===r?(t=s,r=a):(e=s,l=a)}},_getEdgeIntersection:function(t,e,o,s){var a=e.x-t.x,r=e.y-t.y,l=s.min,h=s.max;return 8&o?new n.Point(t.x+a*(h.y-t.y)/r,h.y):4&o?new n.Point(t.x+a*(l.y-t.y)/r,l.y):2&o?new n.Point(h.x,t.y+r*(h.x-t.x)/a):1&o?new n.Point(l.x,t.y+r*(l.x-t.x)/a):i},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,o){var s,a=e.x,r=e.y,l=i.x-a,h=i.y-r,u=l*l+h*h;return u>0&&(s=((t.x-a)*l+(t.y-r)*h)/u,s>1?(a=i.x,r=i.y):s>0&&(a+=l*s,r+=h*s)),l=t.x-a,h=t.y-r,o?l*l+h*h:new n.Point(a,r)}},n.Polyline=n.Path.extend({initialize:function(t,e){n.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(n.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,o=1/0,s=this._parts,a=null,r=0,l=s.length;l>r;r++)for(var h=s[r],u=1,c=h.length;c>u;u++){e=h[u-1],i=h[u];var d=n.LineUtil._sqClosestPointOnSegment(t,e,i,!0);o>d&&(o=d,a=n.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(o)),a},getBounds:function(){var t,e,i=new n.LatLngBounds,o=this.getLatLngs();for(t=0,e=o.length;e>t;t++)i.extend(o[t]);return i},_convertLatLngs:function(t){var e,i;for(e=0,i=t.length;i>e;e++){if(n.Util.isArray(t[e])&&"number"!=typeof t[e][0])return;t[e]=n.latLng(t[e])}return t},_initEvents:function(){n.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=n.Path.VML,o=0,s=t.length,a="";s>o;o++)e=t[o],i&&e._round(),a+=(o?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,o,s=this._originalPoints,a=s.length;if(this.options.noClip)return this._parts=[s],i;this._parts=[];var r=this._parts,l=this._map._pathViewport,h=n.LineUtil;for(t=0,e=0;a-1>t;t++)o=h.clipSegment(s[t],s[t+1],l,t),o&&(r[e]=r[e]||[],r[e].push(o[0]),(o[1]!==s[t+1]||t===a-2)&&(r[e].push(o[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=n.LineUtil,i=0,o=t.length;o>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),n.Path.prototype._updatePath.call(this))}}),n.polyline=function(t,e){return new n.Polyline(t,e)},n.PolyUtil={},n.PolyUtil.clipPolygon=function(t,e){var i,o,s,a,r,l,h,u,c,d=[1,4,2,8],m=n.LineUtil;for(o=0,h=t.length;h>o;o++)t[o]._code=m._getBitCode(t[o],e);for(a=0;4>a;a++){for(u=d[a],i=[],o=0,h=t.length,s=h-1;h>o;s=o++)r=t[o],l=t[s],r._code&u?l._code&u||(c=m._getEdgeIntersection(l,r,u,e),c._code=m._getBitCode(c,e),i.push(c)):(l._code&u&&(c=m._getEdgeIntersection(l,r,u,e),c._code=m._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},n.Polygon=n.Polyline.extend({options:{fill:!0},initialize:function(t,e){n.Polyline.prototype.initialize.call(this,t,e),t&&n.Util.isArray(t[0])&&"number"!=typeof t[0][0]&&(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1))},projectLatlngs:function(){if(n.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,o;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,o=this._holes[t].length;o>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,o=this._parts.length;o>i;i++){var s=n.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){var e=n.Polyline.prototype._getPathPartStr.call(this,t);return e+(n.Browser.svg?"z":"x")}}),n.polygon=function(t,e){return new n.Polygon(t,e)},function(){function t(t){return n.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this}})}n.MultiPolyline=t(n.Polyline),n.MultiPolygon=t(n.Polygon),n.multiPolyline=function(t,e){return new n.MultiPolyline(t,e)},n.multiPolygon=function(t,e){return new n.MultiPolygon(t,e)}}(),n.Rectangle=n.Polygon.extend({initialize:function(t,e){n.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=n.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),n.rectangle=function(t,e){return new n.Rectangle(t,e)},n.Circle=n.Path.extend({initialize:function(t,e,i){n.Path.prototype.initialize.call(this,i),this._latlng=n.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=n.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=new n.LatLng(this._latlng.lat,this._latlng.lng-t),i=this._map.latLngToLayerPoint(e);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-i.x),1)},getBounds:function(){var t=this._getLngRadius(),e=360*(this._mRadius/40075017),i=this._latlng,o=new n.LatLng(i.lat-e,i.lng-t),s=new n.LatLng(i.lat+e,i.lng+t);return new n.LatLngBounds(o,s)},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":n.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(n.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),n.circle=function(t,e,i){return new n.Circle(t,e,i)},n.CircleMarker=n.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){n.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){n.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(t){return this._radius=t,this.redraw()}}),n.circleMarker=function(t,e){return new n.CircleMarker(t,e)},n.Polyline.include(n.Path.CANVAS?{_containsPoint:function(t,e){var i,o,s,a,r,l,h,u=this.options.weight/2;for(n.Browser.touch&&(u+=10),i=0,a=this._parts.length;a>i;i++)for(h=this._parts[i],o=0,r=h.length,s=r-1;r>o;s=o++)if((e||0!==o)&&(l=n.LineUtil.pointToSegmentDistance(t,h[s],h[o]),u>=l))return!0;return!1}}:{}),n.Polygon.include(n.Path.CANVAS?{_containsPoint:function(t){var e,i,o,s,a,r,l,h,u=!1;if(n.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,l=this._parts.length;l>s;s++)for(e=this._parts[s],a=0,h=e.length,r=h-1;h>a;r=a++)i=e[a],o=e[r],i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(u=!u);return u}}:{}),n.Circle.include(n.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),n.GeoJSON=n.FeatureGroup.extend({initialize:function(t,e){n.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,o=n.Util.isArray(t)?t:t.features;if(o){for(e=0,i=o.length;i>e;e++)(o[e].geometries||o[e].geometry)&&this.addData(o[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var a=n.GeoJSON.geometryToLayer(t,s.pointToLayer);return a.feature=t,a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(n.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),n.extend(n.GeoJSON,{geometryToLayer:function(t,e){var i,o,s,a,r,l="Feature"===t.type?t.geometry:t,h=l.coordinates,u=[];switch(l.type){case"Point":return i=this.coordsToLatLng(h),e?e(t,i):new n.Marker(i);case"MultiPoint":for(s=0,a=h.length;a>s;s++)i=this.coordsToLatLng(h[s]),r=e?e(t,i):new n.Marker(i),u.push(r);return new n.FeatureGroup(u);case"LineString":return o=this.coordsToLatLngs(h),new n.Polyline(o);case"Polygon":return o=this.coordsToLatLngs(h,1),new n.Polygon(o);case"MultiLineString":return o=this.coordsToLatLngs(h,1),new n.MultiPolyline(o);case"MultiPolygon":return o=this.coordsToLatLngs(h,2),new n.MultiPolygon(o);case"GeometryCollection":for(s=0,a=l.geometries.length;a>s;s++)r=this.geometryToLayer({geometry:l.geometries[s],type:"Feature",properties:t.properties},e),u.push(r);return new n.FeatureGroup(u);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t,e){var i=parseFloat(t[e?0:1]),o=parseFloat(t[e?1:0]);return new n.LatLng(i,o)},coordsToLatLngs:function(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;s>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):this.coordsToLatLng(t[o],i),a.push(n);return a}}),n.geoJson=function(t,e){return new n.GeoJSON(t,e)},n.DomEvent={addListener:function(t,e,o,s){var a,r,l,h=n.stamp(o),u="_leaflet_"+e+h;return t[u]?this:(a=function(e){return o.call(s||t,e||n.DomEvent._getEvent())},n.Browser.msTouch&&0===e.indexOf("touch")?this.addMsTouchListener(t,e,a,h):(n.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,a,h),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?(r=a,l="mouseenter"===e?"mouseover":"mouseout",a=function(e){return n.DomEvent._checkMouse(t,e)?r(e):i},t.addEventListener(l,a,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),t[u]=a,this))},removeListener:function(t,e,i){var o=n.stamp(i),s="_leaflet_"+e+o,a=t[s];if(a)return n.Browser.msTouch&&0===e.indexOf("touch")?this.removeMsTouchListener(t,e,o):n.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null,this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){for(var e=n.DomEvent.stopPropagation,i=n.Draggable.START.length-1;i>=0;i--)n.DomEvent.addListener(t,n.Draggable.START[i],e);return n.DomEvent.addListener(t,"click",e).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return n.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,i){var o=e.body,s=e.documentElement,a=t.pageX?t.pageX:t.clientX+o.scrollLeft+s.scrollLeft,r=t.pageY?t.pageY:t.clientY+o.scrollTop+s.scrollTop,l=new n.Point(a,r);return i?l._subtract(n.DomUtil.getViewportOffset(i)):l},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e}},n.DomEvent.on=n.DomEvent.addListener,n.DomEvent.off=n.DomEvent.removeListener,n.Draggable=n.Class.extend({includes:n.Mixin.Events,statics:{START:n.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"},TAP_TOLERANCE:15},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._longPress=i&&!n.Browser.msTouch},enable:function(){if(!this._enabled){for(var t=n.Draggable.START.length-1;t>=0;t--)n.DomEvent.on(this._dragStartTarget,n.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=n.Draggable.START.length-1;t>=0;t--)n.DomEvent.off(this._dragStartTarget,n.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(!(!n.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(n.DomEvent.preventDefault(t),n.DomEvent.stopPropagation(t),n.Draggable._disabled))){if(this._simulateClick=!0,t.touches&&t.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),i;var o=t.touches&&1===t.touches.length?t.touches[0]:t,s=o.target;n.Browser.touch&&"a"===s.tagName.toLowerCase()&&n.DomUtil.addClass(s,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new n.Point(o.clientX,o.clientY),this._startPos=this._newPos=n.DomUtil.getPosition(this._element),t.touches&&1===t.touches.length&&n.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(n.bind(function(){var t=this._newPos&&this._newPos.distanceTo(this._startPos)||0;n.Draggable.TAP_TOLERANCE>t&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3)),n.DomEvent.on(e,n.Draggable.MOVE[t.type],this._onMove,this),n.DomEvent.on(e,n.Draggable.END[t.type],this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new n.Point(e.clientX,e.clientY),o=i.subtract(this._startPoint);(o.x||o.y)&&(n.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=n.DomUtil.getPosition(this._element).subtract(o),n.Browser.touch||(n.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(o),this._moving=!0,n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),n.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){var i;if(clearTimeout(this._longPressTimeout),this._simulateClick&&t.changedTouches){var o=t.changedTouches[0],s=o.target,a=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===s.tagName.toLowerCase()&&n.DomUtil.removeClass(s,"leaflet-active"),n.Draggable.TAP_TOLERANCE>a&&(i=o)}n.Browser.touch||(n.DomUtil.enableTextSelection(),this._restoreCursor());for(var r in n.Draggable.MOVE)n.Draggable.MOVE.hasOwnProperty(r)&&(n.DomEvent.off(e,n.Draggable.MOVE[r],this._onMove),n.DomEvent.off(e,n.Draggable.END[r],this._onUp));this._moved&&(n.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1,i&&(this._moved=!1,this._simulateEvent("click",i))},_setMovingCursor:function(){n.DomUtil.addClass(e.body,"leaflet-dragging")},_restoreCursor:function(){n.DomUtil.removeClass(e.body,"leaflet-dragging")},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),n.Handler=n.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),n.Map.mergeOptions({dragging:!0,inertia:!n.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:n.Browser.touch?32:18,easeLinearity:.25,longPress:!0,worldCopyJump:!1}),n.Map.Drag=n.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new n.Draggable(t._mapPane,t._container,t.options.longPress),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint(new n.LatLng(0,0));this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project(new n.LatLng(0,180)).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=a},_onDragEnd:function(){var t=this._map,e=t.options,i=+new Date-this._lastTime,o=!e.inertia||i>e.inertiaThreshold||!this._positions[0];if(o)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,r=e.easeLinearity,l=s.multiplyBy(r/a),h=l.distanceTo(new n.Point(0,0)),u=Math.min(e.inertiaMaxSpeed,h),c=l.multiplyBy(u/h),d=u/(e.inertiaDeceleration*r),m=c.multiplyBy(-d/2).round();
n.Util.requestAnimFrame(function(){t.panBy(m,d,r)})}t.fire("dragend"),e.maxBounds&&n.Util.requestAnimFrame(this._panInsideMaxBounds,t,!0,t._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),n.Map.addInitHook("addHandler","dragging",n.Map.Drag),n.Map.mergeOptions({doubleClickZoom:!0}),n.Map.DoubleClickZoom=n.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setView(t.latlng,this._zoom+1)}}),n.Map.addInitHook("addHandler","doubleClickZoom",n.Map.DoubleClickZoom),n.Map.mergeOptions({scrollWheelZoom:!0}),n.Map.ScrollWheelZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){n.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(t){var e=n.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(n.bind(this._performZoom,this),i),n.DomEvent.preventDefault(t),n.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();if(e=e>0?Math.ceil(e):Math.round(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e){var n=i+e,o=this._getCenterForScrollWheelZoom(n);t.setView(o,n)}},_getCenterForScrollWheelZoom:function(t){var e=this._map,i=e.getZoomScale(t),n=e.getSize()._divideBy(2),o=this._lastMousePos._subtract(n)._multiplyBy(1-1/i),s=e._getTopLeftPoint()._add(n)._add(o);return e.unproject(s)}}),n.Map.addInitHook("addHandler","scrollWheelZoom",n.Map.ScrollWheelZoom),n.extend(n.DomEvent,{_touchstart:n.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:n.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(t,i,o){function s(t){var e;if(n.Browser.msTouch?(p.push(t.pointerId),e=p.length):e=t.touches.length,!(e>1)){var i=Date.now(),o=i-(r||i);l=t.touches?t.touches[0]:t,h=o>0&&u>=o,r=i}}function a(t){if(n.Browser.msTouch){var e=p.indexOf(t.pointerId);if(-1===e)return;p.splice(e,1)}if(h){if(n.Browser.msTouch){var o,s={};for(var a in l)o=l[a],s[a]="function"==typeof o?o.bind(l):o;l=s}l.type="dblclick",i(l),r=null}}var r,l,h=!1,u=250,c="_leaflet_",d=this._touchstart,m=this._touchend,p=[];t[c+d+o]=s,t[c+m+o]=a;var f=n.Browser.msTouch?e.documentElement:t;return t.addEventListener(d,s,!1),f.addEventListener(m,a,!1),n.Browser.msTouch&&f.addEventListener("MSPointerCancel",a,!1),this},removeDoubleTapListener:function(t,i){var o="_leaflet_";return t.removeEventListener(this._touchstart,t[o+this._touchstart+i],!1),(n.Browser.msTouch?e.documentElement:t).removeEventListener(this._touchend,t[o+this._touchend+i],!1),n.Browser.msTouch&&e.documentElement.removeEventListener("MSPointerCancel",t[o+this._touchend+i],!1),this}}),n.extend(n.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(t,e,i,n){switch(e){case"touchstart":return this.addMsTouchListenerStart(t,e,i,n);case"touchend":return this.addMsTouchListenerEnd(t,e,i,n);case"touchmove":return this.addMsTouchListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(t,i,n,o){var s="_leaflet_",a=this._msTouches,r=function(t){for(var e=!1,i=0;a.length>i;i++)if(a[i].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],n(t)};if(t[s+"touchstart"+o]=r,t.addEventListener("MSPointerDown",r,!1),!this._msDocumentListener){var l=function(t){for(var e=0;a.length>e;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};e.documentElement.addEventListener("MSPointerUp",l,!1),e.documentElement.addEventListener("MSPointerCancel",l,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE||0!==t.buttons){for(var e=0;a.length>e;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],i(t)}}var s="_leaflet_",a=this._msTouches;return t[s+"touchmove"+n]=o,t.addEventListener("MSPointerMove",o,!1),this},addMsTouchListenerEnd:function(t,e,i,n){var o="_leaflet_",s=this._msTouches,a=function(t){for(var e=0;s.length>e;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],i(t)};return t[o+"touchend"+n]=a,t.addEventListener("MSPointerUp",a,!1),t.addEventListener("MSPointerCancel",a,!1),this},removeMsTouchListener:function(t,e,i){var n="_leaflet_",o=t[n+e+i];switch(e){case"touchstart":t.removeEventListener("MSPointerDown",o,!1);break;case"touchmove":t.removeEventListener("MSPointerMove",o,!1);break;case"touchend":t.removeEventListener("MSPointerUp",o,!1),t.removeEventListener("MSPointerCancel",o,!1)}return this}}),n.Map.mergeOptions({touchZoom:n.Browser.touch&&!n.Browser.android23}),n.Map.TouchZoom=n.Handler.extend({addHooks:function(){n.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){n.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var o=i.mouseEventToLayerPoint(t.touches[0]),s=i.mouseEventToLayerPoint(t.touches[1]),a=i._getCenterLayerPoint();this._startCenter=o.add(s)._divideBy(2),this._startDist=o.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),n.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),n.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length){var e=this._map,i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(o)/this._startDist,this._delta=i._add(o)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(n.DomUtil.addClass(e._mapPane,"leaflet-zoom-anim leaflet-touching"),e.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),n.Util.cancelAnimFrame(this._animRequest),this._animRequest=n.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),n.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e);t.fire("zoomanim",{center:i,zoom:t.getScaleZoom(this._scale)}),t._tileBg.style[n.DomUtil.TRANSFORM]=n.DomUtil.getTranslateString(this._delta)+" "+n.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,n.DomUtil.removeClass(t._mapPane,"leaflet-touching"),n.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),o=t.layerPointToLatLng(i),s=t.getZoom(),a=t.getScaleZoom(this._scale)-s,r=a>0?Math.ceil(a):Math.floor(a),l=t._limitZoom(s+r);t.fire("zoomanim",{center:o,zoom:l}),t._runAnimation(o,l,t.getZoomScale(l)/this._scale,i,!0)}},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),n.Map.addInitHook("addHandler","touchZoom",n.Map.TouchZoom),n.Map.mergeOptions({boxZoom:!0}),n.Map.BoxZoom=n.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){n.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){n.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(n.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=n.DomUtil.create("div","leaflet-zoom-box",this._pane),n.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",n.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).preventDefault(t),this._map.fire("boxzoomstart"),i)},_onMouseMove:function(t){var e=this._startLayerPoint,i=this._box,o=this._map.mouseEventToLayerPoint(t),s=o.subtract(e),a=new n.Point(Math.min(o.x,e.x),Math.min(o.y,e.y));n.DomUtil.setPosition(i,a),i.style.width=Math.max(0,Math.abs(s.x)-4)+"px",i.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_onMouseUp:function(t){this._pane.removeChild(this._box),this._container.style.cursor="",n.DomUtil.enableTextSelection(),n.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp);var i=this._map,o=i.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(o)){var s=new n.LatLngBounds(i.layerPointToLatLng(this._startLayerPoint),i.layerPointToLatLng(o));i.fitBounds(s),i.fire("boxzoomend",{boxZoomBounds:s})}}}),n.Map.addInitHook("addHandler","boxZoom",n.Map.BoxZoom),n.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),n.Map.Keyboard=n.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),n.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;n.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){n.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){n.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(this._panKeys.hasOwnProperty(e))i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds);else{if(!this._zoomKeys.hasOwnProperty(e))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}n.DomEvent.stop(t)}}),n.Map.addInitHook("addHandler","keyboard",n.Map.Keyboard),n.Handler.MarkerDrag=n.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new n.Draggable(t,t).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=n.DomUtil.getPosition(t._icon),o=t._map.layerPointToLatLng(i);e&&n.DomUtil.setPosition(e,i),t._latlng=o,t.fire("move",{latlng:o}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),n.Handler.PolyEdit=n.Handler.extend({options:{icon:new n.DivIcon({iconSize:new n.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,n.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new n.LayerGroup),this._markers=[];var t,e,i,o,s=this._poly._latlngs;for(t=0,i=s.length;i>t;t++)o=this._createMarker(s[t],t),o.on("click",this._onMarkerClick,this),this._markers.push(o);var a,r;for(t=0,e=i-1;i>t;e=t++)(0!==t||n.Polygon&&this._poly instanceof n.Polygon)&&(a=this._markers[e],r=this._markers[t],this._createMiddleMarker(a,r),this._updatePrevNext(a,r))},_createMarker:function(t,e){var i=new n.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;n.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){if(!(3>this._poly._latlngs.length)){var e=t.target,i=e._index;this._markerGroup.removeLayer(e),this._markers.splice(i,1),this._poly.spliceLatLngs(i,1),this._updateIndexes(i,-1),this._updatePrevNext(e._prev,e._next),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),e._prev&&e._next?this._createMiddleMarker(e._prev,e._next):e._prev?e._next||(e._prev._middleRight=null):e._next._middleLeft=null,this._poly.fire("edit")}},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),a=this._createMarker(s);a.setOpacity(.6),t._middleRight=e._middleLeft=a,n=function(){var n=e._index;a._index=n,a.off("click",i).on("click",this._onMarkerClick,this),s.lat=a.getLatLng().lat,s.lng=a.getLatLng().lng,this._poly.spliceLatLngs(n,0,s),this._markers.splice(n,0,a),a.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e)},o=function(){a.off("dragstart",n,this),a.off("dragend",o,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},i=function(){n.call(this),o.call(this),this._poly.fire("edit")},a.on("click",i,this).on("dragstart",n,this).on("dragend",o,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.latLngToLayerPoint(t.getLatLng()),o=i.latLngToLayerPoint(e.getLatLng());return i.layerPointToLatLng(n._add(o)._divideBy(2))}}),n.Polyline.addInitHook(function(){n.Handler.PolyEdit&&(this.editing=new n.Handler.PolyEdit(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),n.Control=n.Class.extend({options:{position:"topright"},initialize:function(t){n.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return n.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),n.control=function(t){return new n.Control(t)},n.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var a=i+t+" "+i+s;e[t+s]=n.DomUtil.create("div",a,o)}var e=this._controlCorners={},i="leaflet-",o=this._controlContainer=n.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")}}),n.Control.Zoom=n.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",i="leaflet-bar",o=i+"-part",s=n.DomUtil.create("div",e+" "+i);return this._map=t,this._zoomInButton=this._createButton("+","Zoom in",e+"-in "+o+" "+o+"-top",s,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",e+"-out "+o+" "+o+"-bottom",s,this._zoomOut,this),t.on("zoomend",this._updateDisabled,this),s},onRemove:function(t){t.off("zoomend",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,o,s,a){var r=n.DomUtil.create("a",i,o);r.innerHTML=t,r.href="#",r.title=e;var l=n.DomEvent.stopPropagation;return n.DomEvent.on(r,"click",l).on(r,"mousedown",l).on(r,"dblclick",l).on(r,"click",n.DomEvent.preventDefault).on(r,"click",s,a),r},_updateDisabled:function(){var t=this._map,e="leaflet-control-zoom-disabled";n.DomUtil.removeClass(this._zoomInButton,e),n.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&n.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&n.DomUtil.addClass(this._zoomInButton,e)}}),n.Map.mergeOptions({zoomControl:!0}),n.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new n.Control.Zoom,this.addControl(this.zoomControl))}),n.control.zoom=function(t){return new n.Control.Zoom(t)},n.Control.Attribution=n.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leafletjs.com">Leaflet</a>'},initialize:function(t){n.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=n.DomUtil.create("div","leaflet-control-attribution"),n.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):i},removeAttribution:function(t){return t?(this._attributions[t]--,this._update(),this):i},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions.hasOwnProperty(e)&&this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" &#8212; ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),n.Map.mergeOptions({attributionControl:!0}),n.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new n.Control.Attribution).addTo(this))}),n.control.attribution=function(t){return new n.Control.Attribution(t)},n.Control.Scale=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=n.DomUtil.create("div",e),o=this.options;return this._addScales(o,e,i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=n.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=n.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),s=this.options,a=0;o.x>0&&(a=n*(s.maxWidth/o.x)),this._updateScales(s,a)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),n.control.scale=function(t){return new n.Control.Scale(t)},n.Control.Layers=n.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){n.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var o in t)t.hasOwnProperty(o)&&this._addLayer(t[o],o);for(o in e)e.hasOwnProperty(o)&&this._addLayer(e[o],o,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=n.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=n.DomUtil.create("div",t);n.Browser.touch?n.DomEvent.on(e,"click",n.DomEvent.stopPropagation):(n.DomEvent.disableClickPropagation(e),n.DomEvent.on(e,"mousewheel",n.DomEvent.stopPropagation));var i=this._form=n.DomUtil.create("form",t+"-list");if(this.options.collapsed){n.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var o=this._layersLink=n.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",n.Browser.touch?n.DomEvent.on(o,"click",n.DomEvent.stopPropagation).on(o,"click",n.DomEvent.preventDefault).on(o,"click",this._expand,this):n.DomEvent.on(o,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=n.DomUtil.create("div",t+"-base",i),this._separator=n.DomUtil.create("div",t+"-separator",i),this._overlaysList=n.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var o=n.stamp(t);this._layers[o]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t=!1,e=!1;for(var i in this._layers)if(this._layers.hasOwnProperty(i)){var n=this._layers[i];this._addItem(n),e=e||n.overlay,t=t||!n.overlay}this._separator.style.display=e&&t?"":"none"}},_onLayerChange:function(t){var e=n.stamp(t.layer);this._layers[e]&&!this._handlingClick&&this._update()},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,o=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=n.stamp(t.layer),n.DomEvent.on(i,"click",this._onInputClick,this);var a=e.createElement("span");a.innerHTML=" "+t.name,o.appendChild(i),o.appendChild(a);var r=t.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(o),o},_onInputClick:function(){var t,e,i,n,o=this._form.getElementsByTagName("input"),s=o.length;for(this._handlingClick=!0,t=0;s>t;t++)e=o[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?(this._map.addLayer(i.layer),i.overlay||(n=i.layer)):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);n&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:n})),this._handlingClick=!1},_expand:function(){n.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),n.control.layers=function(t,e,i){return new n.Control.Layers(t,e,i)},n.PosAnimation=n.Class.extend({includes:n.Mixin.Events,run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this.fire("start"),t.style[n.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(o||.5)+",1)",n.DomEvent.on(t,n.DomUtil.TRANSITION_END,this._onTransitionEnd,this),n.DomUtil.setPosition(t,e),n.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(n.bind(this.fire,this,"step"),50)},stop:function(){this._inProgress&&(n.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),n.Util.falseFn(this._el.offsetWidth))},_transformRe:/(-?[\d\.]+), (-?[\d\.]+)\)/,_getPos:function(){var e,i,o,s=this._el,a=t.getComputedStyle(s);return n.Browser.any3d?(o=a[n.DomUtil.TRANSFORM].match(this._transformRe),e=parseFloat(o[1]),i=parseFloat(o[2])):(e=parseFloat(a.left),i=parseFloat(a.top)),new n.Point(e,i,!0)},_onTransitionEnd:function(){n.DomEvent.off(this._el,n.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[n.DomUtil.TRANSITION]="",clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),n.Map.include({setView:function(t,e,i){e=this._limitZoom(e);var n=this._zoom!==e;if(this._loaded&&!i&&this._layers){this._panAnim&&this._panAnim.stop();var o=n?this._zoomToIfClose&&this._zoomToIfClose(t,e):this._panByIfClose(t);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e,i){if(t=n.point(t),!t.x&&!t.y)return this;this._panAnim||(this._panAnim=new n.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),this.fire("movestart"),n.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var o=n.DomUtil.getPosition(this._mapPane).subtract(t)._round();return this._panAnim.run(this._mapPane,o,e||.25,i),this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){n.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(t){var e=this._getCenterOffset(t)._floor();return this._offsetIsWithinView(e)?(this.panBy(e),!0):!1},_offsetIsWithinView:function(t,e){var i=e||1,n=this.getSize();return Math.abs(t.x)<=n.x*i&&Math.abs(t.y)<=n.y*i}}),n.PosAnimation=n.DomUtil.TRANSITION?n.PosAnimation:n.PosAnimation.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=n.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=n.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));n.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){n.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),n.Map.mergeOptions({zoomAnimation:n.DomUtil.TRANSITION&&!n.Browser.android23&&!n.Browser.mobileOpera}),n.DomUtil.TRANSITION&&n.Map.addInitHook(function(){n.DomEvent.on(this._mapPane,n.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),n.Map.include(n.DomUtil.TRANSITION?{_zoomToIfClose:function(t,e){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);if(!this._offsetIsWithinView(o,1))return!1;n.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:t,zoom:e});var s=this._getCenterLayerPoint().add(o);return this._prepareTileBg(),this._runAnimation(t,e,i,s),!0},_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(t,e,i,o,s){this._animateToCenter=t,this._animateToZoom=e,this._animatingZoom=!0,n.Draggable&&(n.Draggable._disabled=!0);var a=n.DomUtil.TRANSFORM,r=this._tileBg;clearTimeout(this._clearTileBgTimer),n.Util.falseFn(r.offsetWidth);var l=n.DomUtil.getScaleString(i,o),h=r.style[a];r.style[a]=s?h+" "+l:l+" "+h},_prepareTileBg:function(){var t=this._tilePane,e=this._tileBg;if(e&&this._getLoadedTilesPercentage(e)>.5&&.5>this._getLoadedTilesPercentage(t))return t.style.visibility="hidden",t.empty=!0,this._stopLoadingImages(t),i;e||(e=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),e.style.zIndex=1),e.style[n.DomUtil.TRANSFORM]="",e.style.visibility="hidden",e.empty=!0,t.empty=!1,this._tilePane=this._panes.tilePane=e;var o=this._tileBg=t;n.DomUtil.addClass(o,"leaflet-zoom-animated"),this._stopLoadingImages(o)},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,o,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;i>e;e++)o=s[e],o.complete||(o.onload=n.Util.falseFn,o.onerror=n.Util.falseFn,o.src=n.Util.emptyImageUrl,o.parentNode.removeChild(o))},_onZoomTransitionEnd:function(){this._restoreTileFront(),n.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),n.Util.falseFn(this._tileBg.offsetWidth),this._animatingZoom=!1,this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),n.Draggable&&(n.Draggable._disabled=!1)},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){this._animatingZoom||this.touchZoom._zooming||(this._tileBg.innerHTML="")}}:{}),n.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locationOptions=n.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=n.bind(this._handleGeolocationResponse,this),i=n.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=180*t.coords.accuracy/4e7,i=2*e,o=t.coords.latitude,s=t.coords.longitude,a=new n.LatLng(o,s),r=new n.LatLng(o-e,s-i),l=new n.LatLng(o+e,s+i),h=new n.LatLngBounds(r,l),u=this._locationOptions;if(u.setView){var c=Math.min(this.getBoundsZoom(h),u.maxZoom);this.setView(a,c)}this.fire("locationfound",{latlng:a,bounds:h,accuracy:t.coords.accuracy})}})}(this,document);var mejs=mejs||{};mejs.version="2.11.3",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(t){return encodeURIComponent(t)
},escapeHTML:function(t){return(""+t).split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(t){var e=document.createElement("div");return e.innerHTML='<a href="'+this.escapeHTML(t)+'">x</a>',e.firstChild.href},getScriptPath:function(t){for(var e,i,n,o=0,s="",a="",r=document.getElementsByTagName("script"),l=r.length,h=t.length;l>o;o++){for(i=r[o].src,e=i.lastIndexOf("/"),e>-1?(n=i.substring(e+1),i=i.substring(0,e+1)):(n=i,i=""),e=0;h>e;e++)if(a=t[e],a=n.indexOf(a),a>-1){s=i;break}if(""!==s)break}return s},secondsToTimeCode:function(t,e,i,n){i===void 0?i=!1:n===void 0&&(n=25);var o=Math.floor(t/3600)%24,s=Math.floor(t/60)%60,a=Math.floor(t%60);return t=Math.floor((t%1*n).toFixed(3)),(e||o>0?(10>o?"0"+o:o)+":":"")+(10>s?"0"+s:s)+":"+(10>a?"0"+a:a)+(i?":"+(10>t?"0"+t:t):"")},timeCodeToSeconds:function(t,e,i,n){i===void 0?i=!1:n===void 0&&(n=25),t=t.split(":"),e=parseInt(t[0],10);var o=parseInt(t[1],10),s=parseInt(t[2],10),a=0,r=0;return i&&(a=parseInt(t[3])/n),r=3600*e+60*o+s+a},convertSMPTEtoSeconds:function(t){if("string"!=typeof t)return!1;t=t.replace(",",".");var e=0,i=-1!=t.indexOf(".")?t.split(".")[1].length:0,n=1;t=t.split(":").reverse();for(var o=0;t.length>o;o++)n=1,o>0&&(n=Math.pow(60,o)),e+=Number(t[o])*n;return Number(e.toFixed(i))},removeSwf:function(t){var e=document.getElementById(t);e&&/object|embed/i.test(e.nodeName)&&(mejs.MediaFeatures.isIE?(e.style.display="none",function(){4==e.readyState?mejs.Utility.removeObjectInIE(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))},removeObjectInIE:function(t){if(t=document.getElementById(t)){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}}},mejs.PluginDetector={hasPluginVersion:function(t,e){var i=this.plugins[t];return e[1]=e[1]||0,e[2]=e[2]||0,i[0]>e[0]||i[0]==e[0]&&i[1]>e[1]||i[0]==e[0]&&i[1]==e[1]&&i[2]>=e[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(t,e,i,n,o){this.plugins[t]=this.detectPlugin(e,i,n,o)},detectPlugin:function(t,e,i,n){var o,s=[0,0,0];if(this.nav.plugins!==void 0&&"object"==typeof this.nav.plugins[t]){if((i=this.nav.plugins[t].description)&&(void 0===this.nav.mimeTypes||!this.nav.mimeTypes[e]||this.nav.mimeTypes[e].enabledPlugin))for(s=i.replace(t,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),t=0;s.length>t;t++)s[t]=parseInt(s[t].match(/\d+/),10)}else if(window.ActiveXObject!==void 0)try{(o=new ActiveXObject(i))&&(s=n(o))}catch(a){}return s}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(t){var e=[];return(t=t.GetVariable("$version"))&&(t=t.split(" ")[1].split(","),e=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)]),e}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(t){var e=[0,0,0,0],i=function(t,e,i,n){for(;t.isVersionSupported(e[0]+"."+e[1]+"."+e[2]+"."+e[3]);)e[i]+=n;e[i]-=n};return i(t,e,0,1),i(t,e,1,1),i(t,e,2,1e4),i(t,e,2,1e3),i(t,e,2,100),i(t,e,2,10),i(t,e,2,1),i(t,e,3,1),e}),mejs.MediaFeatures={init:function(){var t,e=this,i=document,n=mejs.PluginDetector.nav,o=mejs.PluginDetector.ua.toLowerCase(),s=["source","track","audio","video"];e.isiPad=null!==o.match(/ipad/i),e.isiPhone=null!==o.match(/iphone/i),e.isiOS=e.isiPhone||e.isiPad,e.isAndroid=null!==o.match(/android/i),e.isBustedAndroid=null!==o.match(/android 2\.[12]/),e.isIE=-1!=n.appName.toLowerCase().indexOf("microsoft"),e.isChrome=null!==o.match(/chrome/gi),e.isFirefox=null!==o.match(/firefox/gi),e.isWebkit=null!==o.match(/webkit/gi),e.isGecko=null!==o.match(/gecko/gi)&&!e.isWebkit,e.isOpera=null!==o.match(/opera/gi),e.hasTouch="ontouchstart"in window,e.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(n=0;s.length>n;n++)t=document.createElement(s[n]);e.supportsMediaTag=t.canPlayType!==void 0||e.isBustedAndroid,e.hasSemiNativeFullScreen=t.webkitEnterFullscreen!==void 0,e.hasWebkitNativeFullScreen=t.webkitRequestFullScreen!==void 0,e.hasMozNativeFullScreen=t.mozRequestFullScreen!==void 0,e.hasTrueNativeFullScreen=e.hasWebkitNativeFullScreen||e.hasMozNativeFullScreen,e.nativeFullScreenEnabled=e.hasTrueNativeFullScreen,e.hasMozNativeFullScreen&&(e.nativeFullScreenEnabled=t.mozFullScreenEnabled),this.isChrome&&(e.hasSemiNativeFullScreen=!1),e.hasTrueNativeFullScreen&&(e.fullScreenEventName=e.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",e.isFullScreen=function(){return t.mozRequestFullScreen?i.mozFullScreen:t.webkitRequestFullScreen?i.webkitIsFullScreen:void 0},e.requestFullScreen=function(t){e.hasWebkitNativeFullScreen?t.webkitRequestFullScreen():e.hasMozNativeFullScreen&&t.mozRequestFullScreen()},e.cancelFullScreen=function(){e.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():e.hasMozNativeFullScreen&&document.mozCancelFullScreen()}),e.hasSemiNativeFullScreen&&o.match(/mac os x 10_5/i)&&(e.hasNativeFullScreen=!1,e.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(t){this.currentTime=t},setMuted:function(t){this.muted=t},setVolume:function(t){this.volume=t},stop:function(){this.pause()},setSrc:function(t){for(var e=this.getElementsByTagName("source");e.length>0;)this.removeChild(e[0]);if("string"==typeof t)this.src=t;else{var i;for(e=0;t.length>e;e++)if(i=t[e],this.canPlayType(i.type)){this.src=i.src;break}}},setVideoSize:function(t,e){this.width=t,this.height=e}},mejs.PluginMediaElement=function(t,e,i){this.id=t,this.pluginType=e,this.src=i,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"!=this.pluginType&&this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(t){var e,i,n,o=mejs.plugins[this.pluginType];for(e=0;o.length>e;e++)if(n=o[e],mejs.PluginDetector.hasPluginVersion(this.pluginType,n.version))for(i=0;n.types.length>i;i++)if(t==n.types[i])return"probably";return""},positionFullscreenButton:function(t,e,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(t,e,i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(t){if("string"==typeof t)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(t)),this.src=mejs.Utility.absolutizeUrl(t);else{var e,i;for(e=0;t.length>e;e++)if(i=t[e],this.canPlayType(i.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(i.src)),this.src=mejs.Utility.absolutizeUrl(t);break}}},setCurrentTime:function(t){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(t):this.pluginApi.setCurrentTime(t),this.currentTime=t)},setVolume:function(t){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*t):this.pluginApi.setVolume(t),this.volume=t)},setMuted:function(t){null!=this.pluginApi&&("youtube"==this.pluginType?(t?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=t,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(t),this.muted=t)},setVideoSize:function(t,e){this.pluginElement.style&&(this.pluginElement.style.width=t+"px",this.pluginElement.style.height=e+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(t,e)},setFullscreen:function(t){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(t)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},removeEventListener:function(t,e){if(!t)return this.events={},!0;var n=this.events[t];if(!n)return!0;if(!e)return this.events[t]=[],!0;for(i=0;n.length>i;i++)if(n[i]===e)return this.events[t].splice(i,1),!0;return!1},dispatchEvent:function(t){var e,i,n=this.events[t];if(n)for(i=Array.prototype.slice.call(arguments,1),e=0;n.length>e;e++)n[e].apply(null,i)},hasAttribute:function(t){return t in this.attributes},removeAttribute:function(t){delete this.attributes[t]},getAttribute:function(t){return this.hasAttribute(t)?this.attributes[t]:""},setAttribute:function(t,e){this.attributes[t]=e},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(t,e,i){this.pluginMediaElements[t]=e,this.htmlMediaElements[t]=i},unregisterPluginElement:function(t){delete this.pluginMediaElements[t],delete this.htmlMediaElements[t]},initPlugin:function(t){var e=this.pluginMediaElements[t],i=this.htmlMediaElements[t];if(e){switch(e.pluginType){case"flash":e.pluginElement=e.pluginApi=document.getElementById(t);break;case"silverlight":e.pluginElement=document.getElementById(e.id),e.pluginApi=e.pluginElement.Content.MediaElementJS}null!=e.pluginApi&&e.success&&e.success(e,i)}},fireEvent:function(t,e,i){var n,o;t=this.pluginMediaElements[t],e={type:e,target:t};for(n in i)t[n]=i[n],e[n]=i[n];o=i.bufferedTime||0,e.target.buffered=e.buffered={start:function(){return 0},end:function(){return o},length:1},t.dispatchEvent(e.type,e)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(t,e){return mejs.HtmlMediaElementShim.create(t,e)},mejs.HtmlMediaElementShim={create:function(t,e){var i=mejs.MediaElementDefaults,n="string"==typeof t?document.getElementById(t):t,o=n.tagName.toLowerCase(),s="audio"===o||"video"===o,a=s?n.getAttribute("src"):n.getAttribute("href");o=n.getAttribute("poster");var r,l=n.getAttribute("autoplay"),h=n.getAttribute("preload"),u=n.getAttribute("controls");for(r in e)i[r]=e[r];return a=a===void 0||null===a||""==a?null:a,o=o===void 0||null===o?"":o,h=h===void 0||null===h||"false"===h?"none":h,l=!(l===void 0||null===l||"false"===l),u=!(u===void 0||null===u||"false"===u),r=this.determinePlayback(n,i,mejs.MediaFeatures.supportsMediaTag,s,a),r.url=null!==r.url?mejs.Utility.absolutizeUrl(r.url):"","native"==r.method?(mejs.MediaFeatures.isBustedAndroid&&(n.src=r.url,n.addEventListener("click",function(){n.play()},!1)),this.updateNative(r,i,l,h)):""!==r.method?this.createPlugin(r,i,o,l,h,u):(this.createErrorMessage(r,i,o),this)},determinePlayback:function(t,e,i,n,o){var s,a,r,l,h=[],u={method:"",url:"",htmlMediaElement:t,isVideo:"audio"!=t.tagName.toLowerCase()};if(e.type!==void 0&&""!==e.type)if("string"==typeof e.type)h.push({type:e.type,url:o});else for(s=0;e.type.length>s;s++)h.push({type:e.type[s],url:o});else if(null!==o)r=this.formatType(o,t.getAttribute("type")),h.push({type:r,url:o});else for(s=0;t.childNodes.length>s;s++)a=t.childNodes[s],1==a.nodeType&&"source"==a.tagName.toLowerCase()&&(o=a.getAttribute("src"),r=this.formatType(o,a.getAttribute("type")),a=a.getAttribute("media"),(!a||!window.matchMedia||window.matchMedia&&window.matchMedia(a).matches)&&h.push({type:r,url:o}));if(!n&&h.length>0&&null!==h[0].url&&this.getTypeFromFile(h[0].url).indexOf("audio")>-1&&(u.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(t.canPlayType=function(t){return null!==t.match(/video\/(mp4|m4v)/gi)?"maybe":""}),i&&("auto"===e.mode||"auto_plugin"===e.mode||"native"===e.mode)){for(n||(s=document.createElement(u.isVideo?"video":"audio"),t.parentNode.insertBefore(s,t),t.style.display="none",u.htmlMediaElement=t=s),s=0;h.length>s;s++)if(""!==t.canPlayType(h[s].type).replace(/no/,"")||""!==t.canPlayType(h[s].type.replace(/mp3/,"mpeg")).replace(/no/,"")){u.method="native",u.url=h[s].url;break}if("native"===u.method&&(null!==u.url&&(t.src=u.url),"auto_plugin"!==e.mode))return u}if("auto"===e.mode||"auto_plugin"===e.mode||"shim"===e.mode)for(s=0;h.length>s;s++)for(r=h[s].type,t=0;e.plugins.length>t;t++)for(o=e.plugins[t],a=mejs.plugins[o],i=0;a.length>i;i++)if(l=a[i],null==l.version||mejs.PluginDetector.hasPluginVersion(o,l.version))for(n=0;l.types.length>n;n++)if(r==l.types[n])return u.method=o,u.url=h[s].url,u;return"auto_plugin"===e.mode&&"native"===u.method?u:(""===u.method&&h.length>0&&(u.url=h[0].url),u)},formatType:function(t,e){return t&&!e?this.getTypeFromFile(t):e&&~e.indexOf(";")?e.substr(0,e.indexOf(";")):e},getTypeFromFile:function(t){return t=t.split("?")[0],t=t.substring(t.lastIndexOf(".")+1).toLowerCase(),(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video":"audio")+"/"+this.getTypeFromExtension(t)},getTypeFromExtension:function(t){switch(t){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return t}},createErrorMessage:function(t,e,i){var n=t.htmlMediaElement,o=document.createElement("div");o.className="me-cannotplay";try{o.style.width=n.width+"px",o.style.height=n.height+"px"}catch(s){}o.innerHTML=""!==i?'<a href="'+t.url+'"><img src="'+i+'" width="100%" height="100%" /></a>':'<a href="'+t.url+'"><span>'+mejs.i18n.t("Download File")+"</span></a>",n.parentNode.insertBefore(o,n),n.style.display="none",e.error(n)},createPlugin:function(t,e,i,n,o,s){i=t.htmlMediaElement;var a,r=1,l=1,h="me_"+t.method+"_"+mejs.meIndex++,u=new mejs.PluginMediaElement(h,t.method,t.url),c=document.createElement("div");for(u.tagName=i.tagName,a=0;i.attributes.length>a;a++){var d=i.attributes[a];1==d.specified&&u.setAttribute(d.name,d.value)}for(a=i.parentNode;null!==a&&"body"!=a.tagName.toLowerCase();){if("p"==a.parentNode.tagName.toLowerCase()){a.parentNode.parentNode.insertBefore(a,a.parentNode);break}a=a.parentNode}switch(t.isVideo?(r=e.videoWidth>0?e.videoWidth:null!==i.getAttribute("width")?i.getAttribute("width"):e.defaultVideoWidth,l=e.videoHeight>0?e.videoHeight:null!==i.getAttribute("height")?i.getAttribute("height"):e.defaultVideoHeight,r=mejs.Utility.encodeUrl(r),l=mejs.Utility.encodeUrl(l)):e.enablePluginDebug&&(r=320,l=240),u.success=e.success,mejs.MediaPluginBridge.registerPluginElement(h,u,i),c.className="me-plugin",c.id=h+"_container",t.isVideo?i.parentNode.insertBefore(c,i):document.body.insertBefore(c,document.body.childNodes[0]),n=["id="+h,"isvideo="+(t.isVideo?"true":"false"),"autoplay="+(n?"true":"false"),"preload="+o,"width="+r,"startvolume="+e.startVolume,"timerrate="+e.timerRate,"flashstreamer="+e.flashStreamer,"height="+l,"pseudostreamstart="+e.pseudoStreamingStartQueryParam],null!==t.url&&("flash"==t.method?n.push("file="+mejs.Utility.encodeUrl(t.url)):n.push("file="+t.url)),e.enablePluginDebug&&n.push("debug=true"),e.enablePluginSmoothing&&n.push("smoothing=true"),e.enablePseudoStreaming&&n.push("pseudostreaming=true"),s&&n.push("controls=true"),e.pluginVars&&(n=n.concat(e.pluginVars)),t.method){case"silverlight":c.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+h+'" name="'+h+'" width="'+r+'" height="'+l+'" class="mejs-shim"><param name="initParams" value="'+n.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+e.pluginPath+e.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(t=document.createElement("div"),c.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+h+'" width="'+r+'" height="'+l+'" class="mejs-shim"><param name="movie" value="'+e.pluginPath+e.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+n.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):c.innerHTML='<embed id="'+h+'" name="'+h+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+e.pluginPath+e.flashName+'" flashvars="'+n.join("&")+'" width="'+r+'" height="'+l+'" class="mejs-shim"></embed>';break;case"youtube":e=t.url.substr(t.url.lastIndexOf("=")+1),youtubeSettings={container:c,containerId:c.id,pluginMediaElement:u,pluginId:h,videoId:e,height:l,width:r},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":u.vimeoid=t.url.substr(t.url.lastIndexOf("/")+1),c.innerHTML='<iframe src="http://player.vimeo.com/video/'+u.vimeoid+'?portrait=0&byline=0&title=0" width="'+r+'" height="'+l+'" frameborder="0" class="mejs-shim"></iframe>'}return i.style.display="none",u},updateNative:function(t,e){var i,n=t.htmlMediaElement;for(i in mejs.HtmlMediaElement)n[i]=mejs.HtmlMediaElement[i];return e.success(n,n),n}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var t=document.createElement("script");t.src="//www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(t){this.isLoaded?this.createIframe(t):(this.loadIframeApi(),this.iframeQueue.push(t))},createIframe:function(t){var e=t.pluginMediaElement,i=new YT.Player(t.containerId,{height:t.height,width:t.width,videoId:t.videoId,playerVars:{controls:0},events:{onReady:function(){t.pluginMediaElement.pluginApi=i,mejs.MediaPluginBridge.initPlugin(t.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(i,e,"timeupdate")},250)},onStateChange:function(t){mejs.YouTubeApi.handleStateChange(t.data,i,e)}}})},createEvent:function(t,e,i){if(i={type:i,target:e},t&&t.getDuration){e.currentTime=i.currentTime=t.getCurrentTime(),e.duration=i.duration=t.getDuration(),i.paused=e.paused,i.ended=e.ended,i.muted=t.isMuted(),i.volume=t.getVolume()/100,i.bytesTotal=t.getVideoBytesTotal(),i.bufferedBytes=t.getVideoBytesLoaded();var n=i.bufferedBytes/i.bytesTotal*i.duration;i.target.buffered=i.buffered={start:function(){return 0},end:function(){return n},length:1}}e.dispatchEvent(i.type,i)},iFrameReady:function(){for(this.isIframeLoaded=this.isLoaded=!0;this.iframeQueue.length>0;)this.createIframe(this.iframeQueue.pop())},flashPlayers:{},createFlash:function(t){this.flashPlayers[t.pluginId]=t;var e,i="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+t.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(e=document.createElement("div"),t.container.appendChild(e),e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+t.pluginId+'" width="'+t.width+'" height="'+t.height+'" class="mejs-shim"><param name="movie" value="'+i+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):t.container.innerHTML='<object type="application/x-shockwave-flash" id="'+t.pluginId+'" data="'+i+'" width="'+t.width+'" height="'+t.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(t){var e=this.flashPlayers[t],i=document.getElementById(t),n=e.pluginMediaElement;n.pluginApi=n.pluginElement=i,mejs.MediaPluginBridge.initPlugin(t),i.cueVideoById(e.videoId),t=e.containerId+"_callback",window[t]=function(t){mejs.YouTubeApi.handleStateChange(t,i,n)},i.addEventListener("onStateChange",t),setInterval(function(){mejs.YouTubeApi.createEvent(i,n,"timeupdate")},250)},handleStateChange:function(t,e,i){switch(t){case-1:i.paused=!0,i.ended=!0,mejs.YouTubeApi.createEvent(e,i,"loadedmetadata");break;case 0:i.paused=!1,i.ended=!0,mejs.YouTubeApi.createEvent(e,i,"ended");break;case 1:i.paused=!1,i.ended=!1,mejs.YouTubeApi.createEvent(e,i,"play"),mejs.YouTubeApi.createEvent(e,i,"playing");break;case 2:i.paused=!0,i.ended=!1,mejs.YouTubeApi.createEvent(e,i,"pause");break;case 3:mejs.YouTubeApi.createEvent(e,i,"progress")}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(t,e){var i={locale:{strings:{}},methods:{}};i.locale.getLanguage=function(){return{language:navigator.language}},i.locale.INIT_LANGUAGE=i.locale.getLanguage(),i.methods.checkPlain=function(t){var e,i,n={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};t+="";for(e in n)n.hasOwnProperty(e)&&(i=RegExp(e,"g"),t=t.replace(i,n[e]));return t},i.methods.formatString=function(t,e){for(var n in e){switch(n.charAt(0)){case"@":e[n]=i.methods.checkPlain(e[n]);break;case"!":break;default:e[n]='<em class="placeholder">'+i.methods.checkPlain(e[n])+"</em>"}t=t.replace(n,e[n])}return t},i.methods.t=function(t,e,n){return i.locale.strings&&i.locale.strings[n.context]&&i.locale.strings[n.context][t]&&(t=i.locale.strings[n.context][t]),e&&(t=i.methods.formatString(t,e)),t},i.t=function(t,e,n){if("string"==typeof t&&t.length>0){var o=i.locale.getLanguage();return n=n||{context:o.language},i.methods.t(t,e,n)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},e.i18n=i}(document,mejs),function(t){t.de={Fullscreen:"Vollbild","Go Fullscreen":"Vollbild an","Turn off Fullscreen":"Vollbild aus",Close:"Schließen"}}(mejs.i18n.locale.strings),function(t){t.zh={Fullscreen:"全螢幕","Go Fullscreen":"全屏模式","Turn off Fullscreen":"退出全屏模式",Close:"關閉"}}(mejs.i18n.locale.strings),"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof ender&&(mejs.$=ender),function(t){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(t){return.05*t.duration},defaultSeekForwardInterval:function(t){return.05*t.duration},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(t,e){e.paused||e.ended?e.play():e.pause()}},{keys:[38],action:function(t,e){e.setVolume(Math.min(e.volume+.1,1))}},{keys:[40],action:function(t,e){e.setVolume(Math.max(e.volume-.1,0))}},{keys:[37,227],action:function(t,e){if(!isNaN(e.duration)&&e.duration>0){t.isVideo&&(t.showControls(),t.startControlsTimer());var i=Math.max(e.currentTime-t.options.defaultSeekBackwardInterval(e),0);e.setCurrentTime(i)}}},{keys:[39,228],action:function(t,e){if(!isNaN(e.duration)&&e.duration>0){t.isVideo&&(t.showControls(),t.startControlsTimer());var i=Math.min(e.currentTime+t.options.defaultSeekForwardInterval(e),e.duration);e.setCurrentTime(i)}}},{keys:[70],action:function(t){t.enterFullScreen!==void 0&&(t.isFullScreen?t.exitFullScreen():t.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(e,i){return this instanceof mejs.MediaElementPlayer?(this.$media=this.$node=t(e),this.node=this.media=this.$media[0],this.node.player!==void 0?this.node.player:(this.node.player=this,i===void 0&&(i=this.$node.data("mejsoptions")),this.options=t.extend({},mejs.MepDefaults,i),this.id="mep_"+mejs.mepIndex++,mejs.players[this.id]=this,this.init(),this)):new mejs.MediaElementPlayer(e,i)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var e=this,i=mejs.MediaFeatures,n=t.extend(!0,{},e.options,{success:function(t,i){e.meReady(t,i)},error:function(t){e.handleError(t)}}),o=e.media.tagName.toLowerCase();e.isDynamic="audio"!==o&&"video"!==o,e.isVideo=e.isDynamic?e.options.isVideo:"audio"!==o&&e.options.isVideo,i.isiPad&&e.options.iPadUseNativeControls||i.isiPhone&&e.options.iPhoneUseNativeControls?(e.$media.attr("controls","controls"),i.isiPad&&null!==e.media.getAttribute("autoplay")&&(e.media.load(),e.media.play())):i.isAndroid&&e.options.AndroidUseNativeControls||(e.$media.removeAttr("controls"),e.container=t('<div id="'+e.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(e.$media[0].className).insertBefore(e.$media),e.container.addClass((i.isAndroid?"mejs-android ":"")+(i.isiOS?"mejs-ios ":"")+(i.isiPad?"mejs-ipad ":"")+(i.isiPhone?"mejs-iphone ":"")+(e.isVideo?"mejs-video ":"mejs-audio ")),i.isiOS?(i=e.$media.clone(),e.container.find(".mejs-mediaelement").append(i),e.$media.remove(),e.$node=e.$media=i,e.node=e.media=i[0]):e.container.find(".mejs-mediaelement").append(e.$media),e.controls=e.container.find(".mejs-controls"),e.layers=e.container.find(".mejs-layers"),i=e.isVideo?"video":"audio",o=i.substring(0,1).toUpperCase()+i.substring(1),e.width=e.options[i+"Width"]>0||(""+e.options[i+"Width"]).indexOf("%")>-1?e.options[i+"Width"]:""!==e.media.style.width&&null!==e.media.style.width?e.media.style.width:null!==e.media.getAttribute("width")?e.$media.attr("width"):e.options["default"+o+"Width"],e.height=e.options[i+"Height"]>0||(""+e.options[i+"Height"]).indexOf("%")>-1?e.options[i+"Height"]:""!==e.media.style.height&&null!==e.media.style.height?e.media.style.height:null!==e.$media[0].getAttribute("height")?e.$media.attr("height"):e.options["default"+o+"Height"],e.setPlayerSize(e.width,e.height),n.pluginWidth=e.height,n.pluginHeight=e.width),mejs.MediaElement(e.$media[0],n),e.container!==void 0&&e.container.trigger("controlsshown")},showControls:function(t){var e=this;t=t===void 0||t,e.controlsAreVisible||(t?(e.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){e.controlsAreVisible=!0,e.container.trigger("controlsshown")}),e.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){e.controlsAreVisible=!0})):(e.controls.css("visibility","visible").css("display","block"),e.container.find(".mejs-control").css("visibility","visible").css("display","block"),e.controlsAreVisible=!0,e.container.trigger("controlsshown")),e.setControlsSize())},hideControls:function(e){var i=this;e=e===void 0||e,i.controlsAreVisible&&(e?(i.controls.stop(!0,!0).fadeOut(200,function(){t(this).css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){t(this).css("visibility","hidden").css("display","block")})):(i.controls.css("visibility","hidden").css("display","block"),i.container.find(".mejs-control").css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1,i.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(t){var e=this;t=t!==void 0?t:1500,e.killControlsTimer("start"),e.controlsTimer=setTimeout(function(){e.hideControls(),e.killControlsTimer("hide")},t)},killControlsTimer:function(){null!==this.controlsTimer&&(clearTimeout(this.controlsTimer),delete this.controlsTimer,this.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){this.killControlsTimer(),this.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){this.showControls(!1),this.controlsEnabled=!0},meReady:function(t,e){var i=this,n=mejs.MediaFeatures,o=e.getAttribute("autoplay");o=!(o===void 0||null===o||"false"===o);var s;if(!i.created){if(i.created=!0,i.media=t,i.domNode=e,!(n.isAndroid&&i.options.AndroidUseNativeControls||n.isiPad&&i.options.iPadUseNativeControls||n.isiPhone&&i.options.iPhoneUseNativeControls)){i.buildposter(i,i.controls,i.layers,i.media),i.buildkeyboard(i,i.controls,i.layers,i.media),i.buildoverlays(i,i.controls,i.layers,i.media),i.findTracks();for(s in i.options.features)if(n=i.options.features[s],i["build"+n])try{i["build"+n](i,i.controls,i.layers,i.media)}catch(a){}i.container.trigger("controlsready"),i.setPlayerSize(i.width,i.height),i.setControlsSize(),i.isVideo&&(mejs.MediaFeatures.hasTouch?i.$media.bind("touchstart",function(){i.controlsAreVisible?i.hideControls(!1):i.controlsEnabled&&i.showControls(!1)}):(i.media.addEventListener("click",function(){i.options.clickToPlayPause&&(i.media.paused?i.media.play():i.media.pause())}),i.container.bind("mouseenter mouseover",function(){i.controlsEnabled&&(i.options.alwaysShowControls||(i.killControlsTimer("enter"),i.showControls(),i.startControlsTimer(2500)))}).bind("mousemove",function(){i.controlsEnabled&&(i.controlsAreVisible||i.showControls(),i.options.alwaysShowControls||i.startControlsTimer(2500))}).bind("mouseleave",function(){i.controlsEnabled&&!i.media.paused&&!i.options.alwaysShowControls&&i.startControlsTimer(1e3)})),i.options.hideVideoControlsOnLoad&&i.hideControls(!1),o&&!i.options.alwaysShowControls&&i.hideControls(),i.options.enableAutosize&&i.media.addEventListener("loadedmetadata",function(t){0>=i.options.videoHeight&&null===i.domNode.getAttribute("height")&&!isNaN(t.target.videoHeight)&&(i.setPlayerSize(t.target.videoWidth,t.target.videoHeight),i.setControlsSize(),i.media.setVideoSize(t.target.videoWidth,t.target.videoHeight))},!1)),t.addEventListener("play",function(){for(var t in mejs.players){var e=mejs.players[t];e.id!=i.id&&i.options.pauseOtherPlayers&&!e.paused&&!e.ended&&e.pause(),e.hasFocus=!1}i.hasFocus=!0},!1),i.media.addEventListener("ended",function(){if(i.options.autoRewind)try{i.media.setCurrentTime(0)}catch(t){}i.media.pause(),i.setProgressRail&&i.setProgressRail(),i.setCurrentRail&&i.setCurrentRail(),i.options.loop?i.media.play():!i.options.alwaysShowControls&&i.controlsEnabled&&i.showControls()},!1),i.media.addEventListener("loadedmetadata",function(){i.updateDuration&&i.updateDuration(),i.updateCurrent&&i.updateCurrent(),i.isFullScreen||(i.setPlayerSize(i.width,i.height),i.setControlsSize())},!1),setTimeout(function(){i.setPlayerSize(i.width,i.height),i.setControlsSize()},50),i.globalBind("resize",function(){i.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||i.setPlayerSize(i.width,i.height),i.setControlsSize()}),"youtube"==i.media.pluginType&&i.container.find(".mejs-overlay-play").hide()}o&&"native"==t.pluginType&&(t.load(),t.play()),i.options.success&&("string"==typeof i.options.success?window[i.options.success](i.media,i.domNode,i):i.options.success(i.media,i.domNode,i))}},handleError:function(t){this.controls.hide(),this.options.error&&this.options.error(t)
},setPlayerSize:function(e,i){if(e!==void 0&&(this.width=e),i!==void 0&&(this.height=i),(""+this.height).indexOf("%")>0||"100%"===this.$node.css("max-width")||this.$node[0].currentStyle&&"100%"===this.$node[0].currentStyle.maxWidth){var n=this.isVideo?this.media.videoWidth&&this.media.videoWidth>0?this.media.videoWidth:this.options.defaultVideoWidth:this.options.defaultAudioWidth,o=this.isVideo?this.media.videoHeight&&this.media.videoHeight>0?this.media.videoHeight:this.options.defaultVideoHeight:this.options.defaultAudioHeight,s=this.container.parent().closest(":visible").width();n=this.isVideo||!this.options.autosizeProgress?parseInt(s*o/n,10):o,"body"===this.container.parent()[0].tagName.toLowerCase()&&(s=t(window).width(),n=t(window).height()),0!=n&&0!=s&&(this.container.width(s).height(n),this.$media.add(this.container.find(".mejs-shim")).width("100%").height("100%"),this.isVideo&&this.media.setVideoSize&&this.media.setVideoSize(s,n),this.layers.children(".mejs-layer").width("100%").height("100%"))}else this.container.width(this.width).height(this.height),this.layers.children(".mejs-layer").width(this.width).height(this.height)},setControlsSize:function(){var e=0,i=0,n=this.controls.find(".mejs-time-rail"),o=this.controls.find(".mejs-time-total");this.controls.find(".mejs-time-current"),this.controls.find(".mejs-time-loaded");var s=n.siblings();this.options&&!this.options.autosizeProgress&&(i=parseInt(n.css("width"))),0!==i&&i||(s.each(function(){var i=t(this);"absolute"!=i.css("position")&&i.is(":visible")&&(e+=t(this).outerWidth(!0))}),i=this.controls.width()-e-(n.outerWidth(!0)-n.width())),n.width(i),o.width(i-(o.outerWidth(!0)-o.width())),this.setProgressRail&&this.setProgressRail(),this.setCurrentRail&&this.setCurrentRail()},buildposter:function(e,i,n,o){var s=t('<div class="mejs-poster mejs-layer"></div>').appendTo(n);i=e.$media.attr("poster"),""!==e.options.poster&&(i=e.options.poster),""!==i&&null!=i?this.setPoster(i):s.hide(),o.addEventListener("play",function(){s.hide()},!1)},setPoster:function(e){var i=this.container.find(".mejs-poster"),n=i.find("img");0==n.length&&(n=t('<img width="100%" height="100%" />').appendTo(i)),n.attr("src",e)},buildoverlays:function(e,i,n,o){var s=this;if(e.isVideo){var a=t('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(n),r=t('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(n),l=t('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(n).click(function(){s.options.clickToPlayPause&&(o.paused?o.play():o.pause())});o.addEventListener("play",function(){l.hide(),a.hide(),i.find(".mejs-time-buffering").hide(),r.hide()},!1),o.addEventListener("playing",function(){l.hide(),a.hide(),i.find(".mejs-time-buffering").hide(),r.hide()},!1),o.addEventListener("seeking",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("seeked",function(){a.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||l.show()},!1),o.addEventListener("waiting",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("loadeddata",function(){a.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("canplay",function(){a.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("error",function(){a.hide(),i.find(".mejs-time-buffering").hide(),r.show(),r.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(e,i,n,o){this.globalBind("keydown",function(t){if(e.hasFocus&&e.options.enableKeyboard)for(var i=0,n=e.options.keyActions.length;n>i;i++)for(var s=e.options.keyActions[i],a=0,r=s.keys.length;r>a;a++)if(t.keyCode==s.keys[a])return t.preventDefault(),s.action(e,o,t.keyCode),!1;return!0}),this.globalBind("click",function(i){0==t(i.target).closest(".mejs-container").length&&(e.hasFocus=!1)})},findTracks:function(){var e=this,i=e.$media.find("track");e.tracks=[],i.each(function(i,n){n=t(n),e.tracks.push({srclang:n.attr("srclang")?n.attr("srclang").toLowerCase():"",src:n.attr("src"),kind:n.attr("kind"),label:n.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(t){this.container[0].className="mejs-container "+t,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(t){this.media.setMuted(t)},setCurrentTime:function(t){this.media.setCurrentTime(t)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(t){this.media.setVolume(t)},getVolume:function(){return this.media.volume},setSrc:function(t){this.media.setSrc(t)},remove:function(){var t,e;for(t in this.options.features)if(e=this.options.features[t],this["clean"+e])try{this["clean"+e](this)}catch(i){}"native"===this.media.pluginType?this.$media.prop("controls",!0):this.media.remove(),this.isDynamic||this.$node.insertBefore(this.container),delete mejs.players[this.id],this.container.remove(),this.globalUnbind(),delete this.node.player}},function(){function e(e,n){var o={d:[],w:[]};return t.each((e||"").split(" "),function(t,e){o[i.test(e)?"w":"d"].push(e+"."+n)}),o.d=o.d.join(" "),o.w=o.w.join(" "),o}var i=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(i,n,o){i=e(i,this.id),i.d&&t(document).bind(i.d,n,o),i.w&&t(window).bind(i.w,n,o)},mejs.MediaElementPlayer.prototype.globalUnbind=function(i,n){i=e(i,this.id),i.d&&t(document).unbind(i.d,n),i.w&&t(window).unbind(i.w,n)}}(),"undefined"!=typeof jQuery&&(jQuery.fn.mediaelementplayer=function(t){return t===!1?this.each(function(){var t=jQuery(this).data("mediaelementplayer");t&&t.remove(),jQuery(this).removeData("mediaelementplayer")}):this.each(function(){jQuery(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,t))}),this}),t(document).ready(function(){t(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(t){t.extend(mejs.MepDefaults,{playpauseText:"Play/Pause"}),t.extend(MediaElementPlayer.prototype,{buildplaypause:function(e,i,n,o){var s=t('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+this.id+'" title="'+this.options.playpauseText+'" aria-label="'+this.options.playpauseText+'"></button></div>').appendTo(i).click(function(t){return t.preventDefault(),o.paused?o.play():o.pause(),!1});o.addEventListener("play",function(){s.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("playing",function(){s.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("pause",function(){s.removeClass("mejs-pause").addClass("mejs-play")},!1),o.addEventListener("paused",function(){s.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{stopText:"Stop"}),t.extend(MediaElementPlayer.prototype,{buildstop:function(e,i,n,o){t('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+this.id+'" title="'+this.options.stopText+'" aria-label="'+this.options.stopText+'"></button></div>').appendTo(i).click(function(){o.paused||o.pause(),o.currentTime>0&&(o.setCurrentTime(0),o.pause(),i.find(".mejs-time-current").width("0px"),i.find(".mejs-time-handle").css("left","0px"),i.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),i.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),n.find(".mejs-poster").show())})}})}(mejs.$),function(t){t.extend(MediaElementPlayer.prototype,{buildprogress:function(e,i,n,o){t('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(i),i.find(".mejs-time-buffering").hide();var s=this,a=i.find(".mejs-time-total");n=i.find(".mejs-time-loaded");var r=i.find(".mejs-time-current"),l=i.find(".mejs-time-handle"),h=i.find(".mejs-time-float"),u=i.find(".mejs-time-float-current"),c=function(t){t=t.pageX;var e=a.offset(),i=a.outerWidth(!0),n=0,s=n=0;o.duration&&(e.left>t?t=e.left:t>i+e.left&&(t=i+e.left),s=t-e.left,n=s/i,n=.02>=n?0:n*o.duration,d&&n!==o.currentTime&&o.setCurrentTime(n),mejs.MediaFeatures.hasTouch||(h.css("left",s),u.html(mejs.Utility.secondsToTimeCode(n)),h.show()))},d=!1;a.bind("mousedown",function(t){return 1===t.which?(d=!0,c(t),s.globalBind("mousemove.dur",function(t){c(t)}),s.globalBind("mouseup.dur",function(){d=!1,h.hide(),s.globalUnbind(".dur")}),!1):void 0}).bind("mouseenter",function(){s.globalBind("mousemove.dur",function(t){c(t)}),mejs.MediaFeatures.hasTouch||h.show()}).bind("mouseleave",function(){d||(s.globalUnbind(".dur"),h.hide())}),o.addEventListener("progress",function(t){e.setProgressRail(t),e.setCurrentRail(t)},!1),o.addEventListener("timeupdate",function(t){e.setProgressRail(t),e.setCurrentRail(t)},!1),s.loaded=n,s.total=a,s.current=r,s.handle=l},setProgressRail:function(t){var e=void 0!=t?t.target:this.media,i=null;e&&e.buffered&&e.buffered.length>0&&e.buffered.end&&e.duration?i=e.buffered.end(0)/e.duration:e&&void 0!=e.bytesTotal&&e.bytesTotal>0&&void 0!=e.bufferedBytes?i=e.bufferedBytes/e.bytesTotal:t&&t.lengthComputable&&0!=t.total&&(i=t.loaded/t.total),null!==i&&(i=Math.min(1,Math.max(0,i)),this.loaded&&this.total&&this.loaded.width(this.total.width()*i))},setCurrentRail:function(){if(void 0!=this.media.currentTime&&this.media.duration&&this.total&&this.handle){var t=Math.round(this.total.width()*this.media.currentTime/this.media.duration),e=t-Math.round(this.handle.outerWidth(!0)/2);this.current.width(t),this.handle.css("left",e)}}})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:" <span> | </span> "}),t.extend(MediaElementPlayer.prototype,{buildcurrent:function(e,i,n,o){t('<div class="mejs-time"><span class="mejs-currenttime">'+(e.options.alwaysShowHours?"00:":"")+(e.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(i),this.currenttime=this.controls.find(".mejs-currenttime"),o.addEventListener("timeupdate",function(){e.updateCurrent()},!1)},buildduration:function(e,i,n,o){i.children().last().find(".mejs-currenttime").length>0?t(this.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(e.options.alwaysShowHours?"00:":"")+(e.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(i.find(".mejs-time")):(i.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),t('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(e.options.alwaysShowHours?"00:":"")+(e.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(i)),this.durationD=this.controls.find(".mejs-duration"),o.addEventListener("timeupdate",function(){e.updateDuration()},!1)},updateCurrent:function(){this.currenttime&&this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))},updateDuration:function(){this.container.toggleClass("mejs-long-video",this.media.duration>3600),this.durationD&&(this.options.duration>0||this.media.duration)&&this.durationD.html(mejs.Utility.secondsToTimeCode(this.options.duration>0?this.options.duration:this.media.duration,this.options.alwaysShowHours,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))}})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{muteText:"Mute Toggle",hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),t.extend(MediaElementPlayer.prototype,{buildvolume:function(e,i,n,o){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var s=this,a=s.isVideo?s.options.videoVolume:s.options.audioVolume,r="horizontal"==a?t('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'" aria-label="'+s.options.muteText+'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(i):t('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'" aria-label="'+s.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(i),l=s.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),h=s.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),u=s.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),c=s.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),d=function(t,e){if(l.is(":visible")||e!==void 0)if(t=Math.max(0,t),t=Math.min(t,1),0==t?r.removeClass("mejs-mute").addClass("mejs-unmute"):r.removeClass("mejs-unmute").addClass("mejs-mute"),"vertical"==a){var i=h.height(),n=h.position(),o=i-i*t;c.css("top",Math.round(n.top+o-c.height()/2)),u.height(i-o),u.css("top",n.top+o)}else i=h.width(),n=h.position(),i*=t,c.css("left",Math.round(n.left+i-c.width()/2)),u.width(Math.round(i));else l.show(),d(t,!0),l.hide()},m=function(t){var e=null,i=h.offset();if("vertical"==a){if(e=h.height(),parseInt(h.css("top").replace(/px/,""),10),e=(e-(t.pageY-i.top))/e,0==i.top||0==i.left)return}else e=h.width(),e=(t.pageX-i.left)/e;e=Math.max(0,e),e=Math.min(e,1),d(e),0==e?o.setMuted(!0):o.setMuted(!1),o.setVolume(e)},p=!1,f=!1;r.hover(function(){l.show(),f=!0},function(){f=!1,!p&&"vertical"==a&&l.hide()}),l.bind("mouseover",function(){f=!0}).bind("mousedown",function(t){return m(t),s.globalBind("mousemove.vol",function(t){m(t)}),s.globalBind("mouseup.vol",function(){p=!1,s.globalUnbind(".vol"),!f&&"vertical"==a&&l.hide()}),p=!0,!1}),r.find("button").click(function(){o.setMuted(!o.muted)}),o.addEventListener("volumechange",function(){p||(o.muted?(d(0),r.removeClass("mejs-mute").addClass("mejs-unmute")):(d(o.volume),r.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),s.container.is(":visible")&&(d(e.options.startVolume),0===e.options.startVolume&&o.setMuted(!0),"native"===o.pluginType&&o.setVolume(e.options.startVolume))}}})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),t.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,docStyleOverflow:null,isInIframe:!1,buildfullscreen:function(e,i,n,o){if(e.isVideo){e.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen&&(n=function(){mejs.MediaFeatures.isFullScreen()?(e.isNativeFullScreen=!0,e.setControlsSize()):(e.isNativeFullScreen=!1,e.exitFullScreen())},mejs.MediaFeatures.hasMozNativeFullScreen?e.globalBind(mejs.MediaFeatures.fullScreenEventName,n):e.container.bind(mejs.MediaFeatures.fullScreenEventName,n));var s=this,a=t('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+s.id+'" title="'+s.options.fullscreenText+'" aria-label="'+s.options.fullscreenText+'"></button></div>').appendTo(i);if("native"===s.media.pluginType||!s.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)a.click(function(){mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||e.isFullScreen?e.exitFullScreen():e.enterFullScreen()});else{var r=null;if(function(){var t=document.createElement("x"),e=document.documentElement,i=window.getComputedStyle;return"pointerEvents"in t.style?(t.style.pointerEvents="auto",t.style.pointerEvents="x",e.appendChild(t),i=i&&"auto"===i(t,"").pointerEvents,e.removeChild(t),!!i):!1}()&&!mejs.MediaFeatures.isOpera){var l=!1,h=function(){if(l){for(var t in u)u[t].hide();a.css("pointer-events",""),s.controls.css("pointer-events",""),l=!1}},u={};i=["top","left","right","bottom"];var c,d=function(){var t=a.offset().left-s.container.offset().left,e=a.offset().top-s.container.offset().top,i=a.outerWidth(!0),n=a.outerHeight(!0),o=s.container.width(),r=s.container.height();for(c in u)u[c].css({position:"absolute",top:0,left:0});u.top.width(o).height(e),u.left.width(t).height(n).css({top:e}),u.right.width(o-t-i).height(n).css({top:e,left:t+i}),u.bottom.width(o).height(r-n-e).css({top:e+n})};for(s.globalBind("resize",function(){d()}),c=0,n=i.length;n>c;c+=1)u[i[c]]=t('<div class="mejs-fullscreen-hover" />').appendTo(s.container).mouseover(h).hide();a.mouseover(function(){if(!s.isFullScreen){var t=a.offset(),i=e.container.offset();o.positionFullscreenButton(t.left-i.left,t.top-i.top,!1),a.css("pointer-events","none"),s.controls.css("pointer-events","none");for(c in u)u[c].show();d(),l=!0}}),o.addEventListener("fullscreenchange",function(){h()})}else a.mouseover(function(){null!==r&&(clearTimeout(r),delete r);var t=a.offset(),i=e.container.offset();o.positionFullscreenButton(t.left-i.left,t.top-i.top,!0)}).mouseout(function(){null!==r&&(clearTimeout(r),delete r),r=setTimeout(function(){o.hideFullscreenButton()},1500)})}e.fullscreenBtn=a,s.globalBind("keydown",function(t){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||s.isFullScreen)&&27==t.keyCode&&e.exitFullScreen()})}},cleanfullscreen:function(t){t.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var e=this;if("native"===e.media.pluginType||!mejs.MediaFeatures.isFirefox&&!e.options.usePluginFullScreen){if(docStyleOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",normalHeight=e.container.height(),normalWidth=e.container.width(),"native"===e.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(e.container[0]),e.isInIframe&&setTimeout(function i(){e.isNativeFullScreen&&(t(window).width()!==screen.width?e.exitFullScreen():setTimeout(i,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return e.media.webkitEnterFullscreen(),void 0;if(e.isInIframe){var n=e.options.newWindowCallback(this);if(""!==n){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return e.pause(),window.open(n,e.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"),void 0;setTimeout(function(){e.isNativeFullScreen||(e.pause(),window.open(n,e.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}e.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),e.containerSizeTimeout=setTimeout(function(){e.container.css({width:"100%",height:"100%"}),e.setControlsSize()},500),"native"===e.pluginType?e.$media.width("100%").height("100%"):(e.container.find(".mejs-shim").width("100%").height("100%"),e.media.setVideoSize(t(window).width(),t(window).height())),e.layers.children("div").width("100%").height("100%"),e.fullscreenBtn&&e.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),e.setControlsSize(),e.isFullScreen=!0}},exitFullScreen:function(){clearTimeout(this.containerSizeTimeout),"native"!==this.media.pluginType&&mejs.MediaFeatures.isFirefox?this.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||this.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),document.documentElement.style.overflow=docStyleOverflow,this.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),"native"===this.pluginType?this.$media.width(normalWidth).height(normalHeight):(this.container.find("object embed").width(normalWidth).height(normalHeight),this.media.setVideoSize(normalWidth,normalHeight)),this.layers.children("div").width(normalWidth).height(normalHeight),this.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),this.setControlsSize(),this.isFullScreen=!1)}})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"Captions/Subtitles",hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),t.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(e,i,n,o){if(0!=e.tracks.length){for(e.chapters=t('<div class="mejs-chapters mejs-layer"></div>').prependTo(n).hide(),e.captions=t('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover"><span class="mejs-captions-text"></span></div></div>').prependTo(n).hide(),e.captionsText=e.captions.find(".mejs-captions-text"),e.captionsButton=t('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+this.id+'" title="'+this.options.tracksText+'" aria-label="'+this.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+e.id+'_captions" id="'+e.id+'_captions_none" value="none" checked="checked" /><label for="'+e.id+'_captions_none">None</label></li></ul></div></div>').appendTo(i),i=n=0;e.tracks.length>i;i++)"subtitles"==e.tracks[i].kind&&n++;for(this.options.toggleCaptionsButtonWhenOnlyOne&&1==n?e.captionsButton.on("click",function(){e.setTrack(null==e.selectedTrack?e.tracks[0].srclang:"none")}):e.captionsButton.hover(function(){t(this).find(".mejs-captions-selector").css("visibility","visible")},function(){t(this).find(".mejs-captions-selector").css("visibility","hidden")}).on("click","input[type=radio]",function(){lang=this.value,e.setTrack(lang)}),e.options.alwaysShowControls?e.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):e.container.bind("controlsshown",function(){e.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){o.paused||e.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),e.trackToLoad=-1,e.selectedTrack=null,e.isLoadingTrack=!1,i=0;e.tracks.length>i;i++)"subtitles"==e.tracks[i].kind&&e.addTrackButton(e.tracks[i].srclang,e.tracks[i].label);e.loadNextTrack(),o.addEventListener("timeupdate",function(){e.displayCaptions()},!1),""!=e.options.slidesSelector&&(e.slidesContainer=t(e.options.slidesSelector),o.addEventListener("timeupdate",function(){e.displaySlides()},!1)),o.addEventListener("loadedmetadata",function(){e.displayChapters()},!1),e.container.hover(function(){e.hasChapters&&(e.chapters.css("visibility","visible"),e.chapters.fadeIn(200).height(e.chapters.find(".mejs-chapter").outerHeight()))},function(){e.hasChapters&&!o.paused&&e.chapters.fadeOut(200,function(){t(this).css("visibility","hidden"),t(this).css("display","block")})}),null!==e.node.getAttribute("autoplay")&&e.chapters.css("visibility","hidden")}},setTrack:function(t){var e;if("none"==t)this.selectedTrack=null,this.captionsButton.removeClass("mejs-captions-enabled");else for(e=0;this.tracks.length>e;e++)if(this.tracks[e].srclang==t){null==this.selectedTrack&&this.captionsButton.addClass("mejs-captions-enabled"),this.selectedTrack=this.tracks[e],this.captions.attr("lang",this.selectedTrack.srclang),this.displayCaptions();break}},loadNextTrack:function(){this.trackToLoad++,this.trackToLoad<this.tracks.length?(this.isLoadingTrack=!0,this.loadTrack(this.trackToLoad)):(this.isLoadingTrack=!1,this.checkForTracks())},loadTrack:function(e){var i=this,n=i.tracks[e];t.ajax({url:n.src,dataType:"text",success:function(t){n.entries="string"==typeof t&&/<tt\s+xml/gi.exec(t)?mejs.TrackFormatParser.dfxp.parse(t):mejs.TrackFormatParser.webvvt.parse(t),n.isLoaded=!0,i.enableTrackButton(n.srclang,n.label),i.loadNextTrack(),"chapters"==n.kind&&i.media.addEventListener("play",function(){i.media.duration>0&&i.displayChapters(n)},!1),"slides"==n.kind&&i.setupSlides(n)},error:function(){i.loadNextTrack()}})},enableTrackButton:function(e,i){""===i&&(i=mejs.language.codes[e]||e),this.captionsButton.find("input[value="+e+"]").prop("disabled",!1).siblings("label").html(i),this.options.startLanguage==e&&t("#"+this.id+"_captions_"+e).click(),this.adjustLanguageBox()},addTrackButton:function(e,i){""===i&&(i=mejs.language.codes[e]||e),this.captionsButton.find("ul").append(t('<li><input type="radio" name="'+this.id+'_captions" id="'+this.id+"_captions_"+e+'" value="'+e+'" disabled="disabled" /><label for="'+this.id+"_captions_"+e+'">'+i+" (loading)</label></li>")),this.adjustLanguageBox(),this.container.find(".mejs-captions-translations option[value="+e+"]").remove()},adjustLanguageBox:function(){this.captionsButton.find(".mejs-captions-selector").height(this.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+this.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var t=!1;if(this.options.hideCaptionsButtonWhenEmpty){for(i=0;this.tracks.length>i;i++)if("subtitles"==this.tracks[i].kind){t=!0;break}t||(this.captionsButton.hide(),this.setControlsSize())}},displayCaptions:function(){if(this.tracks!==void 0){var t,e=this.selectedTrack;if(null!=e&&e.isLoaded)for(t=0;e.entries.times.length>t;t++)if(this.media.currentTime>=e.entries.times[t].start&&this.media.currentTime<=e.entries.times[t].stop)return this.captionsText.html(e.entries.text[t]),this.captions.show().height(0),void 0;this.captions.hide()}},setupSlides:function(t){this.slides=t,this.slides.entries.imgs=[this.slides.entries.text.length],this.showSlide(0)},showSlide:function(e){if(void 0!==this.tracks&&void 0!==this.slidesContainer){var i=this,n=i.slides.entries.text[e],o=i.slides.entries.imgs[e];o===void 0||o.fadeIn===void 0?i.slides.entries.imgs[e]=o=t('<img src="'+n+'">').on("load",function(){o.appendTo(i.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):o.is(":visible")||o.is(":animated")||(console.log("showing existing slide"),o.fadeIn().siblings(":visible").fadeOut())}},displaySlides:function(){if(this.slides!==void 0){var t,e=this.slides;for(t=0;e.entries.times.length>t;t++)if(this.media.currentTime>=e.entries.times[t].start&&this.media.currentTime<=e.entries.times[t].stop){this.showSlide(t);break}}},displayChapters:function(){var t;for(t=0;this.tracks.length>t;t++)if("chapters"==this.tracks[t].kind&&this.tracks[t].isLoaded){this.drawChapters(this.tracks[t]),this.hasChapters=!0;break}},drawChapters:function(e){var i,n,o=this,s=n=0;for(o.chapters.empty(),i=0;e.entries.times.length>i;i++)n=e.entries.times[i].stop-e.entries.times[i].start,n=Math.floor(100*(n/o.media.duration)),(n+s>100||i==e.entries.times.length-1&&100>n+s)&&(n=100-s),o.chapters.append(t('<div class="mejs-chapter" rel="'+e.entries.times[i].start+'" style="left: '+(""+s)+"%;width: "+(""+n)+'%;"><div class="mejs-chapter-block'+(i==e.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+e.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(e.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(e.entries.times[i].stop)+"</span></div></div>")),s+=n;o.chapters.find("div.mejs-chapter").click(function(){o.media.setCurrentTime(parseFloat(t(this).attr("rel"))),o.media.paused&&o.media.play()}),o.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(e){var i=0;e=mejs.TrackFormatParser.split2(e,/\r?\n/);for(var n,o,s={text:[],times:[]};e.length>i;i++)if(this.pattern_identifier.exec(e[i])&&(i++,(n=this.pattern_timecode.exec(e[i]))&&e.length>i)){for(i++,o=e[i],i++;""!==e[i]&&e.length>i;)o=o+"\n"+e[i],i++;o=t.trim(o).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),s.text.push(o),s.times.push({start:0==mejs.Utility.convertSMPTEtoSeconds(n[1])?.2:mejs.Utility.convertSMPTEtoSeconds(n[1]),stop:mejs.Utility.convertSMPTEtoSeconds(n[3]),settings:n[5]})}return s}},dfxp:{parse:function(e){e=t(e).filter("tt");var i=0;i=e.children("div").eq(0);var n=i.find("p");i=e.find("#"+i.attr("style"));var o,s;if(e={text:[],times:[]},i.length&&(s=i.removeAttr("id").get(0).attributes,s.length))for(o={},i=0;s.length>i;i++)o[s[i].name.split(":")[1]]=s[i].value;for(i=0;n.length>i;i++){var a;if(s={start:null,stop:null,style:null},n.eq(i).attr("begin")&&(s.start=mejs.Utility.convertSMPTEtoSeconds(n.eq(i).attr("begin"))),!s.start&&n.eq(i-1).attr("end")&&(s.start=mejs.Utility.convertSMPTEtoSeconds(n.eq(i-1).attr("end"))),n.eq(i).attr("end")&&(s.stop=mejs.Utility.convertSMPTEtoSeconds(n.eq(i).attr("end"))),!s.stop&&n.eq(i+1).attr("begin")&&(s.stop=mejs.Utility.convertSMPTEtoSeconds(n.eq(i+1).attr("begin"))),o){a="";for(var r in o)a+=r+":"+o[r]+";"}a&&(s.style=a),0==s.start&&(s.start=.2),e.times.push(s),s=t.trim(n.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),e.text.push(s),0==e.times.start&&(e.times.start=2)}return e}},split2:function(t,e){return t.split(e)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(t,e){var i,n=[],o="";for(i=0;t.length>i;i++)o+=t.substring(i,i+1),e.test(o)&&(n.push(o.replace(e,"")),o="");return n.push(o),n})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(t){return t.enterFullScreen===void 0?null:t.isFullScreen?"Turn off Fullscreen":"Go Fullscreen"},click:function(t){t.isFullScreen?t.exitFullScreen():t.enterFullScreen()}},{render:function(t){return t.media.muted?"Unmute":"Mute"},click:function(t){t.media.muted?t.setMuted(!1):t.setMuted(!0)}},{isSeparator:!0},{render:function(){return"Download Video"},click:function(t){window.location.href=t.media.currentSrc}}]}),t.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(e){e.contextMenu=t('<div class="mejs-contextmenu"></div>').appendTo(t("body")).hide(),e.container.bind("contextmenu",function(t){return e.isContextMenuEnabled?(t.preventDefault(),e.renderContextMenu(t.clientX-1,t.clientY-1),!1):void 0}),e.container.bind("click",function(){e.contextMenu.hide()}),e.contextMenu.bind("mouseleave",function(){e.startContextMenuTimer()})},cleancontextmenu:function(t){t.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var t=this;
t.killContextMenuTimer(),t.contextMenuTimer=setTimeout(function(){t.hideContextMenu(),t.killContextMenuTimer()},750)},killContextMenuTimer:function(){var t=this.contextMenuTimer;null!=t&&(clearTimeout(t),delete t)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(e,i){for(var n=this,o="",s=n.options.contextMenuItems,a=0,r=s.length;r>a;a++)if(s[a].isSeparator)o+='<div class="mejs-contextmenu-separator"></div>';else{var l=s[a].render(n);null!=l&&(o+='<div class="mejs-contextmenu-item" data-itemindex="'+a+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}n.contextMenu.empty().append(t(o)).css({top:i,left:e}).show(),n.contextMenu.find(".mejs-contextmenu-item").each(function(){var e=t(this),i=parseInt(e.data("itemindex"),10),o=n.options.contextMenuItems[i];o.show!==void 0&&o.show(e,n),e.click(function(){o.click!==void 0&&o.click(n),n.contextMenu.hide()})}),setTimeout(function(){n.killControlsTimer("rev3")},100)}})}(mejs.$),function(t){t.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),t.extend(MediaElementPlayer.prototype,{buildpostroll:function(e,i,n){var o=this.container.find('link[rel="postroll"]').attr("href");o!==void 0&&(e.postroll=t('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+this.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(n).hide(),this.media.addEventListener("ended",function(){t.ajax({dataType:"html",url:o,success:function(t){n.find(".mejs-postroll-layer-content").html(t)}}),e.postroll.show()},!1))}})}(mejs.$),window.Modernizr=function(t,e,i){function n(t){p.cssText=t}function o(t,e){return typeof t===e}var s,a,r,l="2.6.2",h={},u=!0,c=e.documentElement,d="modernizr",m=e.createElement(d),p=m.style,f=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),g={},v=[],_=v.slice,y=function(t,i,n,o){var s,a,r,l,h=e.createElement("div"),u=e.body,m=u||e.createElement("body");if(parseInt(n,10))for(;n--;)r=e.createElement("div"),r.id=o?o[n]:d+(n+1),h.appendChild(r);return s=["&#173;",'<style id="s',d,'">',t,"</style>"].join(""),h.id=d,(u?h:m).innerHTML+=s,m.appendChild(h),u||(m.style.background="",m.style.overflow="hidden",l=c.style.overflow,c.style.overflow="hidden",c.appendChild(m)),a=i(h,t),u?h.parentNode.removeChild(h):(m.parentNode.removeChild(m),c.style.overflow=l),!!a},w={}.hasOwnProperty;r=o(w,"undefined")||o(w.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(t,e){return w.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=_.call(arguments,1),n=function(){if(this instanceof n){var o=function(){};o.prototype=e.prototype;var s=new o,a=e.apply(s,i.concat(_.call(arguments)));return Object(a)===a?a:s}return e.apply(t,i.concat(_.call(arguments)))};return n}),g.touch=function(){var i;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?i=!0:y(["@media (",f.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){i=9===t.offsetTop}),i};for(var b in g)r(g,b)&&(a=b.toLowerCase(),h[a]=g[b](),v.push((h[a]?"":"no-")+a));return h.addTest=function(t,e){if("object"==typeof t)for(var n in t)r(t,n)&&h.addTest(n,t[n]);else{if(t=t.toLowerCase(),h[t]!==i)return h;e="function"==typeof e?e():e,u!==void 0&&u&&(c.className+=" "+(e?"":"no-")+t),h[t]=e}return h},n(""),m=s=null,h._version=l,h._prefixes=f,h.testStyles=y,c.className=c.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(u?" js "+v.join(" "):""),h}(this,this.document);var artworkInfo="",slides="",variable="",clss="",slideHasVideo=!1,playing=!1,tombstoneTimeout="",introTimeout="",zoomerTemplate=_.template($("#zoomer").html()),lastSlideId="image-view-1";mejs.MediaFeatures.hasTouch=!1,$.getJSON("javascripts/test.json",function(t){slides=t.slides;for(variable in slides)slides[variable].zoomer_class="slide-index-"+variable,slides[variable].id="video"+variable,slides[variable].player_id="player"+variable,$(".swipe-wrap").append(zoomerTemplate(slides[variable])),"zoomer"===slides[variable].type&&Zoomer.zoom_image_by_class({container:slides[variable].zoomer_class,tileURL:slides[variable].zoomer_url,imageWidth:slides[variable].zoomer_width,imageHeight:slides[variable].zoomer_height});$(".video-container video").mediaelementplayer({videoWidth:1920,videoHeight:1080,startVolume:1,features:["progress"],alwaysShowControls:!0}),setTimeout(slideInit,500)}),$(document).ready(function(){showTombstone(),Modernizr.touch?($(document).on("touchstart",function(){showTombstone(),hideIntro()}),$("body").attr("oncontextmenu","return false")):$(document).on("mousedown",function(){showTombstone(),hideIntro()}),$("nav a").on("click",function(t){t.stopPropagation()}),$("#colorbox").on("click",function(t){t.stopPropagation()}),$(".info-link").on("click",function(t){t.stopPropagation(),t.preventDefault(),$.colorbox({transition:"none",width:"60%",initialWidth:"60%",fadeOut:250,opacity:.8,inline:!0,href:"#info",onComplete:function(){$("#cboxLoadedContent article").scroller({customClass:"walker-scroller",trackMargin:8,handleSize:60}),$("#cboxLoadedContent article").hasClass("scroller-active")||$("#cboxLoadedContent .info-wrapper").addClass("locked")},onClosed:function(){$(".locked").removeClass("locked")}})})}),window.Swipe=function(t,e){var i=this;t&&(this.container=t,this.element=this.container.children[0],this.browser={touch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}(),transitions:function(){var t=document.createElement("swipe"),e=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return!0;return!1}()},e=e||{},this.index=e.startSlide||0,this.speed=e.speed||300,this.callback=e.callback||function(){},this.transitionEnd=e.transitionEnd||function(){},this.delay=e.auto||0,this.cont=void 0!=e.continuous?!!e.continuous:!0,this.disableScroll=!!e.disableScroll,this.index=parseInt(this.index,10),this.setup(),this.begin(),this.element.addEventListener?(this.browser.touch&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1)),this.browser.transitions&&(this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1)),window.addEventListener("resize",this,!1)):window.onresize=function(){i.setup()})},Swipe.prototype={setup:function(){if(this.slides=this.element.children,this.length=this.slides.length,this.cache=Array(this.length),!(2>this.length)&&(this.width=this.container.getBoundingClientRect().width||this.container.offsetWidth,this.width)){var t=[[],[],[]];this.element.style.width=this.slides.length*this.width+"px";for(var e=this.length-1;e>-1;e--){var i=this.slides[e];i.style.width=this.width+"px",i.setAttribute("data-index",e),this.browser.transitions&&(i.style.left=e*-this.width+"px"),t[this.index>e?0:e>this.index?2:1].push(e)}this.browser.transitions?(this._stack(t[0],-1),this._stack(t[1],0),this._stack(t[2],1)):this.element.style.left=this.index*-this.width+"px",this.container.style.visibility="visible"}},kill:function(){this.delay=0,clearTimeout(this.interval);for(var t=[],e=this.slides.length-1;e>=0;e--)this.slides[e].style.width="",t.push(e);this._stack(t,0);var i=this.element;i.className=i.className.replace("swipe-active",""),this.element.removeEventListener?(this.browser.touch&&(this.element.removeEventListener("touchstart",this,!1),this.element.removeEventListener("touchmove",this,!1),this.element.removeEventListener("touchend",this,!1)),this.browser.transitions&&(this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("msTransitionEnd",this,!1),this.element.removeEventListener("oTransitionEnd",this,!1),this.element.removeEventListener("transitionend",this,!1)),window.removeEventListener("resize",this,!1)):window.onresize=null},getPos:function(){return this.index},prev:function(t){this.delay=t||0,clearTimeout(this.interval),this.index?this.slide(this.index-1,this.speed):this.cont&&this.slide(this.length-1,this.speed)},next:function(t){this.delay=t||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.cont&&this.slide(0,this.speed)},begin:function(){var t=this;this.interval=this.delay?setTimeout(function(){t.next(t.delay)},this.delay):0},handleEvent:function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.onTransitionEnd(t);break;case"resize":this.setup()}t.stopPropagation()},onTouchStart:function(t){var e=this;e.start={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,time:Number(new Date)},e.isScrolling=void 0,e.deltaX=0},onTouchMove:function(t){var e=this;t.touches.length>1||t.scale&&1!==t.scale||(e.deltaX=t.touches[0].pageX-e.start.pageX,e.isScrolling===void 0&&(e.isScrolling=!!(e.isScrolling||Math.abs(e.deltaX)<Math.abs(t.touches[0].pageY-e.start.pageY))),e.isScrolling?e.disableScroll&&t.preventDefault():(t.preventDefault(),e.delay=0,clearTimeout(e.interval),e.deltaX=e.deltaX/(!e.index&&e.deltaX>0||e.index==e.length-1&&0>e.deltaX?Math.abs(e.deltaX)/e.width+1:1),e._move([e.index-1,e.index,e.index+1],e.deltaX)))},onTouchEnd:function(){var t=this,e=500>Number(new Date)-t.start.time&&Math.abs(t.deltaX)>20||Math.abs(t.deltaX)>t.width/2,i=!t.index&&t.deltaX>0||t.index==t.length-1&&0>t.deltaX,n=0>t.deltaX;t.isScrolling||(e&&!i?(n?(t._stack([t.index-1],-1),t._slide([t.index,t.index+1],-t.width,t.speed),t.index+=1):(t._stack([t.index+1],1),t._slide([t.index-1,t.index],t.width,t.speed),t.index+=-1),t.callback(t.index,t.slides[t.index])):t._slide([t.index-1,t.index,t.index+1],0,t.speed))},onTransitionEnd:function(t){this._getElemIndex(t.target)==this.index&&(this.delay&&this.begin(),this.transitionEnd(this.index,this.slides[this.index]))},slide:function(t,e){var i=this.index;if(i!=t){var e=e===void 0?this.speed:e;if(this.browser.transitions){for(var n=Math.abs(i-t)-1,o=Math.abs(i-t)/(i-t),s=[];n--;)s.push((t>i?t:i)-n-1);this._stack(s,o),this._slide([i,t],this.width*o,e)}else this._animate(i*-this.width,t*-this.width,e);this.index=t,this.callback(this.index,this.slides[this.index])}},_slide:function(t,e,i){for(var n=this.slides,o=t.length;o--;)this._translate(n[t[o]],e+this.cache[t[o]],i?i:0),this.cache[t[o]]+=e},_stack:function(t,e){for(var i=this.slides,n=t.length,o=this.width*e;n--;)this._translate(i[t[n]],o,0),this.cache[t[n]]=o},_move:function(t,e){for(var i=this.slides,n=t.length;n--;)this._translate(i[t[n]],e+this.cache[t[n]],0)},_translate:function(t,e,i){if(t){var n=t.style;n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=i+"ms",n.webkitTransform="translate("+e+"px,0)"+"translateZ(0)",n.msTransform=n.MozTransform=n.OTransform="translateX("+e+"px)"}},_animate:function(t,e,i){var n=this.element;if(!i)return n.style.left=e+"px",void 0;var o=this,s=new Date,a=setInterval(function(){var r=new Date-s;return r>i?(n.style.left=e+"px",o.delay&&o.begin(),o.transitionEnd(o.index,o.slides[o.index]),clearInterval(a),void 0):(n.style.left=(e-t)*(Math.floor(100*(r/i))/100)+t+"px",void 0)},4)},_getElemIndex:function(t){return parseInt(t.getAttribute("data-index"),10)}},(window.jQuery||window.Zepto)&&function(t){t.fn.Swipe=function(e){return this.each(function(){var i=t(this);i.data("Swipe",new Swipe(i[0],e))})}}(window.jQuery||window.Zepto);var zoomerTemplate=_.template("\n\n<% if (type == 'video') {%>\n    <div id='<%= id %>' class='zoomer video'>\n        <div class='video-container'>\n            <video id='<%= player_id %>' poster='<%= video_poster %>' src='<%= video_src %>' type='video/mp4' controls='controls'></video>\n        </div>\n        <div class='hidden slide-article'><article class='info'><%= text %></article></div>\n        <ul class='hidden meta'>\n            <li class='title'><%= title %></li>\n            <li class='artist'><%= artist %></li>\n            <li class='year'><%= year %></li>\n        </ul>\n    </div>\n<% } %>\n<% if (type == 'zoomer') {%>\n    <div class='zoomer <%= zoomer_class %>'>\n        <div class='hidden slide-article'><article class='info'><%= text %></article></div>\n        <ul class='hidden meta'>\n            <li class='title'><%= title %></li>\n            <li class='artist'><%= artist %></li>\n            <li class='year'><%= year %></li>\n        </ul>\n    </div>\n<% } %>\n\n");(function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,a=n.push,r=n.slice,l=n.concat,h=o.toString,u=o.hasOwnProperty,c=n.forEach,d=n.map,m=n.reduce,p=n.reduceRight,f=n.filter,g=n.every,v=n.some,_=n.indexOf,y=n.lastIndexOf,w=Array.isArray,b=Object.keys,x=s.bind,T=function(t){return t instanceof T?t:this instanceof T?(this._wrapped=t,void 0):new T(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=T),exports._=T):t._=T,T.VERSION="1.4.4";var P=T.each=T.forEach=function(t,e,n){if(null!=t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(e.call(n,t[o],o,t)===i)return}else for(var a in t)if(T.has(t,a)&&e.call(n,t[a],a,t)===i)return};T.map=T.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(P(t,function(t,o,s){n[n.length]=e.call(i,t,o,s)}),n)};var L="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return n&&(e=T.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(P(t,function(t,s,a){o?i=e.call(n,i,t,s,a):(i=t,o=!0)}),!o)throw new TypeError(L);return i},T.reduceRight=T.foldr=function(t,e,i,n){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return n&&(e=T.bind(e,n)),o?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var a=T.keys(t);s=a.length}if(P(t,function(r,l,h){l=a?a[--s]:--s,o?i=e.call(n,i,t[l],l,h):(i=t[l],o=!0)}),!o)throw new TypeError(L);return i},T.find=T.detect=function(t,e,i){var n;return M(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},T.filter=T.select=function(t,e,i){var n=[];return null==t?n:f&&t.filter===f?t.filter(e,i):(P(t,function(t,o,s){e.call(i,t,o,s)&&(n[n.length]=t)}),n)},T.reject=function(t,e,i){return T.filter(t,function(t,n,o){return!e.call(i,t,n,o)},i)},T.every=T.all=function(t,e,n){e||(e=T.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,n):(P(t,function(t,s,a){return(o=o&&e.call(n,t,s,a))?void 0:i}),!!o)};var M=T.some=T.any=function(t,e,n){e||(e=T.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,n):(P(t,function(t,s,a){return o||(o=e.call(n,t,s,a))?i:void 0}),!!o)};T.contains=T.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):M(t,function(t){return t===e})},T.invoke=function(t,e){var i=r.call(arguments,2),n=T.isFunction(e);return T.map(t,function(t){return(n?e:t[e]).apply(t,i)})},T.pluck=function(t,e){return T.map(t,function(t){return t[e]})},T.where=function(t,e,i){return T.isEmpty(e)?i?null:[]:T[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},T.findWhere=function(t,e){return T.where(t,e,!0)},T.max=function(t,e,i){if(!e&&T.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&T.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return P(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;a>=n.computed&&(n={value:t,computed:a})}),n.value},T.min=function(t,e,i){if(!e&&T.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&T.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return P(t,function(t,o,s){var a=e?e.call(i,t,o,s):t;n.computed>a&&(n={value:t,computed:a})}),n.value},T.shuffle=function(t){var e,i=0,n=[];return P(t,function(t){e=T.random(i++),n[i-1]=n[e],n[e]=t}),n};var S=function(t){return T.isFunction(t)?t:function(e){return e[t]}};T.sortBy=function(t,e,i){var n=S(e);return T.pluck(T.map(t,function(t,e,o){return{value:t,index:e,criteria:n.call(i,t,e,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var E=function(t,e,i,n){var o={},s=S(e||T.identity);return P(t,function(e,a){var r=s.call(i,e,a,t);n(o,r,e)}),o};T.groupBy=function(t,e,i){return E(t,e,i,function(t,e,i){(T.has(t,e)?t[e]:t[e]=[]).push(i)})},T.countBy=function(t,e,i){return E(t,e,i,function(t,e){T.has(t,e)||(t[e]=0),t[e]++})},T.sortedIndex=function(t,e,i,n){i=null==i?T.identity:S(i);for(var o=i.call(n,e),s=0,a=t.length;a>s;){var r=s+a>>>1;o>i.call(n,t[r])?s=r+1:a=r}return s},T.toArray=function(t){return t?T.isArray(t)?r.call(t):t.length===+t.length?T.map(t,T.identity):T.values(t):[]},T.size=function(t){return null==t?0:t.length===+t.length?t.length:T.keys(t).length},T.first=T.head=T.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:r.call(t,0,e)},T.initial=function(t,e,i){return r.call(t,0,t.length-(null==e||i?1:e))},T.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},T.rest=T.tail=T.drop=function(t,e,i){return r.call(t,null==e||i?1:e)},T.compact=function(t){return T.filter(t,T.identity)};var C=function(t,e,i){return P(t,function(t){T.isArray(t)?e?a.apply(i,t):C(t,e,i):i.push(t)}),i};T.flatten=function(t,e){return C(t,e,[])},T.without=function(t){return T.difference(t,r.call(arguments,1))},T.uniq=T.unique=function(t,e,i,n){T.isFunction(e)&&(n=i,i=e,e=!1);var o=i?T.map(t,i,n):t,s=[],a=[];return P(o,function(i,n){(e?n&&a[a.length-1]===i:T.contains(a,i))||(a.push(i),s.push(t[n]))}),s},T.union=function(){return T.uniq(l.apply(n,arguments))},T.intersection=function(t){var e=r.call(arguments,1);return T.filter(T.uniq(t),function(t){return T.every(e,function(e){return T.indexOf(e,t)>=0})})},T.difference=function(t){var e=l.apply(n,r.call(arguments,1));return T.filter(t,function(t){return!T.contains(e,t)})},T.zip=function(){for(var t=r.call(arguments),e=T.max(T.pluck(t,"length")),i=Array(e),n=0;e>n;n++)i[n]=T.pluck(t,""+n);return i},T.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},T.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=T.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}if(_&&t.indexOf===_)return t.indexOf(e,i);for(;o>n;n++)if(t[n]===e)return n;return-1},T.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(y&&t.lastIndexOf===y)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var o=n?i:t.length;o--;)if(t[o]===e)return o;return-1},T.range=function(t,e,i){1>=arguments.length&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=Array(n);n>o;)s[o++]=t,t+=i;return s},T.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,r.call(arguments,1));var i=r.call(arguments,2);return function(){return t.apply(e,i.concat(r.call(arguments)))}},T.partial=function(t){var e=r.call(arguments,1);return function(){return t.apply(this,e.concat(r.call(arguments)))}},T.bindAll=function(t){var e=r.call(arguments,1);return 0===e.length&&(e=T.functions(t)),P(e,function(e){t[e]=T.bind(t[e],t)}),t},T.memoize=function(t,e){var i={};return e||(e=T.identity),function(){var n=e.apply(this,arguments);return T.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},T.delay=function(t,e){var i=r.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},T.defer=function(t){return T.delay.apply(T,[t,1].concat(r.call(arguments,1)))},T.throttle=function(t,e){var i,n,o,s,a=0,r=function(){a=new Date,o=null,s=t.apply(i,n)};return function(){var l=new Date,h=e-(l-a);return i=this,n=arguments,0>=h?(clearTimeout(o),o=null,a=l,s=t.apply(i,n)):o||(o=setTimeout(r,h)),s}},T.debounce=function(t,e,i){var n,o;return function(){var s=this,a=arguments,r=function(){n=null,i||(o=t.apply(s,a))},l=i&&!n;return clearTimeout(n),n=setTimeout(r,e),l&&(o=t.apply(s,a)),o}},T.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},T.wrap=function(t,e){return function(){var i=[t];return a.apply(i,arguments),e.apply(this,i)}},T.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},T.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},T.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)T.has(t,i)&&(e[e.length]=i);return e},T.values=function(t){var e=[];for(var i in t)T.has(t,i)&&e.push(t[i]);return e},T.pairs=function(t){var e=[];for(var i in t)T.has(t,i)&&e.push([i,t[i]]);return e},T.invert=function(t){var e={};for(var i in t)T.has(t,i)&&(e[t[i]]=i);return e},T.functions=T.methods=function(t){var e=[];for(var i in t)T.isFunction(t[i])&&e.push(i);return e.sort()},T.extend=function(t){return P(r.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},T.pick=function(t){var e={},i=l.apply(n,r.call(arguments,1));return P(i,function(i){i in t&&(e[i]=t[i])}),e},T.omit=function(t){var e={},i=l.apply(n,r.call(arguments,1));for(var o in t)T.contains(i,o)||(e[o]=t[o]);return e},T.defaults=function(t){return P(r.call(arguments,1),function(e){if(e)for(var i in e)null==t[i]&&(t[i]=e[i])}),t},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t};var k=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof T&&(t=t._wrapped),e instanceof T&&(e=e._wrapped);var o=h.call(t);if(o!=h.call(e))return!1;switch(o){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;i.push(t),n.push(e);var a=0,r=!0;if("[object Array]"==o){if(a=t.length,r=a==e.length)for(;a--&&(r=k(t[a],e[a],i,n)););}else{var l=t.constructor,u=e.constructor;if(l!==u&&!(T.isFunction(l)&&l instanceof l&&T.isFunction(u)&&u instanceof u))return!1;for(var c in t)if(T.has(t,c)&&(a++,!(r=T.has(e,c)&&k(t[c],e[c],i,n))))break;if(r){for(c in e)if(T.has(e,c)&&!a--)break;r=!a}}return i.pop(),n.pop(),r};T.isEqual=function(t,e){return k(t,e,[],[])},T.isEmpty=function(t){if(null==t)return!0;if(T.isArray(t)||T.isString(t))return 0===t.length;for(var e in t)if(T.has(t,e))return!1;return!0},T.isElement=function(t){return!(!t||1!==t.nodeType)},T.isArray=w||function(t){return"[object Array]"==h.call(t)},T.isObject=function(t){return t===Object(t)},P(["Arguments","Function","String","Number","Date","RegExp"],function(t){T["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),T.isArguments(arguments)||(T.isArguments=function(t){return!(!t||!T.has(t,"callee"))}),true&&(T.isFunction=function(t){return"function"==typeof t}),T.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},T.isNaN=function(t){return T.isNumber(t)&&t!=+t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return u.call(t,e)},T.noConflict=function(){return t._=e,this},T.identity=function(t){return t},T.times=function(t,e,i){for(var n=Array(t),o=0;t>o;o++)n[o]=e.call(i,o);return n},T.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};j.unescape=T.invert(j.escape);var D={escape:RegExp("["+T.keys(j.escape).join("")+"]","g"),unescape:RegExp("("+T.keys(j.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(t){T[t]=function(e){return null==e?"":(""+e).replace(D[t],function(e){return j[t][e]})}}),T.result=function(t,e){if(null==t)return null;var i=t[e];return T.isFunction(i)?i.call(t):i},T.mixin=function(t){P(T.functions(t),function(e){var i=T[e]=t[e];T.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),N.call(this,i.apply(T,t))}})};var z=0;T.uniqueId=function(t){var e=++z+"";return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(t,e,i){var n;i=T.defaults({},i,T.templateSettings);var o=RegExp([(i.escape||A).source,(i.interpolate||A).source,(i.evaluate||A).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(o,function(e,i,n,o,r){return a+=t.slice(s,r).replace(B,function(t){return"\\"+I[t]}),i&&(a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),s=r+e.length,e}),a+="';\n",i.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=Function(i.variable||"obj","_",a)}catch(r){throw r.source=a,r}if(e)return n(e,T);var l=function(t){return n.call(this,t,T)};return l.source="function("+(i.variable||"obj")+"){\n"+a+"}",l},T.chain=function(t){return T(t).chain()};var N=function(t){return this._chain?T(t).chain():t};T.mixin(T),P(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];T.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],N.call(this,i)}}),P(["concat","join","slice"],function(t){var e=n[t];T.prototype[t]=function(){return N.call(this,e.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var Zoomer=Zoomer||{};Zoomer.guidCounter=0;var Video=Zoomer.zoom_image_by_class=function(t){Zoomer.loadExtraTiles=-1!==window.location.href.indexOf("longSwipe")?2:6;var e=t.container;$("."+t.container).each(function(){var i=e+Zoomer.guidCounter++;$(this).attr("id",i);var n=$(this).innerHTML;t.container=i,Zoomer.zoom_image(t),n&&this.insertBefore(n,this.firstChild)})};L.Draggable=L.Draggable.extend({_onDown:function(t){if(this._verticalPan=void 0,!(!L.Browser.touch&&t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)){var e=Zoomer.getParentMapForElement(t.target);if((!L.Browser.touch||"function"!=typeof Swipe||e._zoom>e.getMinZoom())&&(L.DomEvent.preventDefault(t),L.DomEvent.stopPropagation(t)),!L.Draggable._disabled){if(this._simulateClick=!0,t.touches&&t.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),void 0;var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=i.target;L.Browser.touch&&"a"===n.tagName.toLowerCase()&&L.DomUtil.addClass(n,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new L.Point(i.clientX,i.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),t.touches&&1===t.touches.length&&L.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(L.bind(function(){var t=this._newPos&&this._newPos.distanceTo(this._startPos)||0;L.Draggable.TAP_TOLERANCE>t&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3)),L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this),L.DomEvent.on(document,L.Draggable.END[t.type],this._onUp,this))}}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new L.Point(e.clientX,e.clientY),n=i.subtract(this._startPoint);if(n.x||n.y){var o=null;if(t.target&&(t.target._layer!==void 0?o=t.target._layer._map:Zoomer.zoomers[t.target.id]&&(o=Zoomer.zoomers[t.target.id].map)),L.Browser.touch&&"function"==typeof Swipe||L.DomEvent.preventDefault(t),o&&void 0===this._verticalPan&&(this._verticalPan=!!(this._verticalPan||o.isAtEastEdge()&&o.isAtWestEdge()&&Math.abs(n.x)<Math.abs(n.y))),L.Browser.touch&&(!o||n.x>0&&o.isAtEastEdge()||0>n.x&&o.isAtWestEdge())){if(!(o&&this._verticalPan&&o._zoom>o.getMinZoom()))return this._simulateClick=!1,void 0;n.x=0}this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(n),L.Browser.touch||(L.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(n),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)}}}}),Swipe.prototype.handleEvent=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.onTransitionEnd(t);break;case"resize":this.setup()}},Swipe.prototype.getCurrentSlideId=function(){return this.slides?this.slides[this.index].id:this.element.children[0].id},Swipe.prototype.getPreviousSlideId=function(){return this.previousSlideId},Swipe.prototype.setup=function(){if(2>this.element.children.length)return this.container.style.visibility="visible",void 0;if(this.slides||(this.element.appendChild(this.element.children[0].cloneNode(!0)),this.element.insertBefore(this.element.children[this.element.children.length-2].cloneNode(!0),this.element.firstChild),this.index++),this.gutter=10,this.currentSlideId=this.element.children[0].id,this.previousSlideId=this.element.children[0].id,this.slideDuration=500,this.slides=this.element.children,this.length=this.slides.length,this.cache=Array(this.length),!(2>this.length)&&(this.width=this.container.getBoundingClientRect().width+2*this.gutter||this.container.offsetWidth,this.width)){var t=[[],[],[]];this.element.style.width=this.slides.length*this.width+"px";for(var e=this.length-1;e>-1;e--){var i=this.slides[e];i.style.width=this.width-2*this.gutter+"px",i.setAttribute("data-index",e),i.style.marginLeft=this.gutter+"px",i.style.marginRight=this.gutter+"px",this.browser.transitions&&(i.style.left=e*-this.width-this.gutter+"px"),t[this.index>e?0:e>this.index?2:1].push(e)}this.browser.transitions?(this._stack(t[0],-1),this._stack(t[1],0),this._stack(t[2],1)):this.element.style.left=this.index*-this.width+"px",this.container.style.visibility="visible"}},Zoomer.isPinching=void 0,Swipe.prototype.onTouchMove=function(t){var e=this;if(t.touches.length>1||t.scale&&1!==t.scale)return Zoomer.isPinching=!0,void 0;if(Zoomer.isPinching&&(e.start.pageX=t.touches[0].pageX,Zoomer.isPinching=void 0),e.deltaX=t.touches[0].pageX-e.start.pageX,e.isScrolling===void 0&&(e.isScrolling=!!(e.isScrolling||Math.abs(e.deltaX)<Math.abs(t.touches[0].pageY-e.start.pageY))),t.target&&t.target._layer!==void 0){var i=t.target._layer._map;if(i._getEdgeDeltas(),i&&!(e.deltaX>0&&i.isAtEastEdge()||0>e.deltaX&&i.isAtWestEdge()))return t.preventDefault(),this.onTouchStart(t)}e.isScrolling?e.disableScroll&&t.preventDefault():(t.preventDefault(),e.delay=0,clearTimeout(e.interval),e.deltaX=e.deltaX/(!e.index&&e.deltaX>0||e.index==e.length-1&&0>e.deltaX?Math.abs(e.deltaX)/e.width+1:1),e._move([e.index-1,e.index,e.index+1],e.deltaX))},Swipe.prototype.onTouchEnd=function(){var t=this,e=Number(new Date)-t.start.time<t.slideDuration&&Math.abs(t.deltaX)>20||Math.abs(t.deltaX)>t.width/2,i=!t.index&&t.deltaX>0||t.index==t.length-1&&0>t.deltaX,n=0>t.deltaX;t.isScrolling||(e&&!i?(n?(t._stack([t.index-1],-1),t._slide([t.index,t.index+1],-t.width,t.speed),t.index+=1):(t._stack([t.index+1],1),t._slide([t.index-1,t.index],t.width,t.speed),t.index+=-1),t.callback(t.index,t.slides[t.index])):t._slide([t.index-1,t.index,t.index+1],0,t.speed))
},Swipe.prototype.onTransitionEnd=function(t){this._getElemIndex(t.target)==this.index&&(this.previousSlideId=this.slides[this.index].id,0==this.index&&this.slide(this.slides.length-2,0),this.index==this.slides.length-1&&this.slide(1,0),this.delay&&this.begin(),this.transitionEnd(this.index,this.slides[this.index]),this.currentSlideId=this.slides[this.index].id)},Swipe.prototype.getPos=function(){var t=this.index;return 0==this.index&&(t=this.slides.length-2),this.index==this.slides.length-1&&(t=1),t-1};